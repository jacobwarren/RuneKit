Building for debugging...
[0/4] Write swift-version--58304C5D6DBC2206.txt
Build complete! (0.17s)
Test Suite 'All tests' started at 2025-08-14 19:46:38.698.
Test Suite 'All tests' passed at 2025-08-14 19:46:38.699.
	 Executed 0 tests, with 0 failures (0 unexpected) in 0.000 (0.001) seconds
◇ Test run started.
↳ Testing Library Version: 124.4
↳ Target Platform: arm64e-apple-macos14.0
◇ Suite "Yoga Integration Tests" started.
◇ Suite FlexLayoutTests started.
◇ Suite BoxLayoutTests started.
◇ Suite SGRDiffingV2Tests started.
◇ Suite WrapEmojiClippingE2ETests started.
◇ Suite FlexAdvancedLayoutTests started.
◇ Suite FlexLayoutSnapshotTests started.
◇ Suite SGRMicroOptimizationsTests started.
◇ Suite AlignmentWrapMatrixTests started.
◇ Suite TerminalProfileTests started.
◇ Suite SGRStateMachineTests started.
◇ Suite LineComposerTests started.
◇ Suite SGRDiffingTests started.
◇ Suite ANSIAwareWrapSliceTests started.
◇ Suite YogaRawValueValidationTests started.
◇ Suite ANSIConversionTests started.
◇ Suite ANSITokenizerSGRTests started.
◇ Suite UnicodeCategoriesEdgeCasesTests started.
◇ Suite InvalidColorAndInverseTests started.
◇ Suite BoxFlexLayoutIntegrationTests started.
◇ Suite LineComposerGoldenZWJTests started.
◇ Suite WidthBasicTests started.
◇ Suite ANSITokenizerBasicTests started.
◇ Suite UnicodeCategoriesNormalizationTests started.
◇ Suite TextAttributesTests started.
◇ Suite WidthWcwidthTests started.
◇ Suite TextStyleSnapshotTests started.
◇ Suite HybridReconcilerPolicyTests started.
◇ Suite StyledTextExampleTests started.
◇ Suite ChildIdentityReconcilerTests started.
◇ Suite UnicodeCategoriesBasicTests started.
◇ Suite TextSpanTests started.
◇ Suite WidthPerformanceTests started.
◇ Suite ANSITokenizerControlTests started.
◇ Suite WidthGoldenTests started.
◇ Suite StrategyDeterminerTests started.
◇ Suite SGRAttributeToggleTests started.
◇ Suite LogLaneTests started.
◇ Suite ExtendedPictographicScalarTests started.
◇ Suite "Transform time-aware initializer tests" started.
◇ Suite TextStyleMatrixTests started.
◇ Suite UnicodeCategoriesEnumTests started.
◇ Suite TransformExactStringTests started.
◇ Suite "Output serialization integration" started.
◇ Suite TerminalRendererTests started.
◇ Suite StyledTextOperationsTests started.
◇ Suite CursorPolicyTests started.
◇ Suite "RUNE-39+: App exit code propagation via useApp().exit(error:)" started.
◇ Suite WidthEastAsianTests started.
◇ Suite ScrollOptimizationTests started.
◇ Suite "Output writer tests" started.
◇ Suite AlignmentSnapshotTests started.
◇ Suite TextWrappingTests started.
◇ Suite TextModifiersTests started.
◇ Suite "RUNE-41: Focus registry + useFocus/useFocusManager" started.
◇ Suite "Hooks additional tests: deps sugar, useRef, useMemo" started.
◇ Suite "Pluggable IO ordering tests" started.
◇ Suite "RUNE-38: useInput matrix" started.
◇ Suite "Render handle control tests" started.
◇ Suite TextStyleTypeTests started.
◇ Suite BoxBorderBackgroundANSITests started.
◇ Suite TextWrappingSnapshotTests started.
◇ Suite "Hooks deps equality edge cases" started.
✘ Suite "Concurrency and integration tests" skipped: "Timing-sensitive tests that can hang"
◇ Suite RenderOptionsTests started.
◇ Suite ComponentTests started.
◇ Suite TextStyleParityTests started.
◇ Suite PerformanceTimingExposureTests started.
◇ Suite TextColorBleedTests started.
◇ Suite AutowrapGuardTests started.
◇ Suite "Output abstractions tests" started.
◇ Suite "RuneCLI exit helper" started.
✘ Suite "Ticker tests" skipped: "Timing-sensitive test that can hang"
◇ Suite "Ink-style renderer behavior on main screen buffer" started.
◇ Suite TextErgonomicsTests started.
◇ Suite SpacerCrossAxisTests started.
◇ Suite ConsoleCaptureTests started.
◇ Suite RenderHandleConcurrencyStressTests started.
◇ Suite "PTY integration tests" started.
◇ Suite TerminalGridANSIAwareTests started.
◇ Suite AlternateScreenBufferIntegrationTests started.
◇ Suite LineDiffTests started.
◇ Suite SignalHandlerTests started.
◇ Suite "Output writer blocking behavior" started.
◇ Suite "RUNE-38: useInput hook" started.
◇ Suite RuneCLISmokeTests started.
◇ Suite TransformANSISafetyTests started.
◇ Suite CursorReturnPolicyTests started.
◇ Suite "Alt-screen ordering boundaries" started.
◇ Suite "Line diff frame buffer tests" started.
◇ Suite "Hooks runtime tests for RUNE-37" started.
◇ Suite RenderConfigurationTests started.
◇ Suite "Frame buffer integration tests" started.
◇ Suite "Render function tests" started.
◇ Suite HybridDifferInjectionTests started.
◇ Suite ViewStatePreservationTests started.
◇ Suite RuneKitTests started.
◇ Suite "RUNE-40: useStdin/Stdout/Stderr hooks" started.
◇ Suite LineDiffPerformanceTests started.
◇ Suite "RUNE-39: useApp() context" started.
◇ Suite "Line diff benchmark tests" started.
◇ Suite "Resize handling tests" started.
◇ Suite "RUNE-27 integration tests" started.
◇ Suite ScrollOptimizationNShiftTests started.
◇ Suite "Composite View resolution renders child components (no placeholders)" started.
◇ Test "Truncate appends reset and prevents style bleed" started.
◇ Suite "RUNE-41: useFocusManager hook" started.
◇ Suite InputManagerTests started.
◇ Suite LogLaneANSIWIdeWrapTests started.
◇ Suite AdvancedInputDecodingTests started.
◇ Suite "Render handle rerender tests" started.
◇ Suite AlternateScreenBufferTests started.
◇ Suite PerformanceMetricsTests started.
◇ Suite "RUNE-41: useFocusManager hook integration" started.
◇ Test "Box with percentage dimensions" started.
◇ Test "Box with fixed dimensions" started.
◇ Test "Align items center works correctly" started.
◇ Test "Box column layout with row gap" started.
◇ Test "Basic row layout calculation" started.
◇ Test "Rect equality" started.
◇ Test "Basic column layout calculation" started.
◇ Test "Box with padding produces correct layout" started.
◇ Test "Multiple children in column direction" started.
◇ Test "Justify content space between works correctly" started.
◇ Test "Size equality" started.
◇ Test "Layout calculation with zero dimensions" started.
◇ Test "Box with margin affects positioning" started.
◇ Test "Float to terminal coordinate conversion" started.
◇ Test "Justify content center works correctly" started.
◇ Test "Box row layout with column gap" started.
◇ Test "FlexLayout uses Yoga backend correctly" started.
◇ Test "Single child layout" started.
◇ Test "Margin affects element positioning" started.
◇ Test "Multiple layout calculations don't leak memory" started.
◇ Test "Multiple children in row direction" started.
◇ Test "Attribute-level diff emits reset when reverting to default and caches common attrs" started.
◇ Test "FlexLayout handles empty children" started.
◇ Test "Edge case: Padding larger than container" started.
◇ Test "Align self center overrides parent align items" started.
◇ Test "Nested boxes with padding and margin" started.
◇ Test "Flex grow distributes extra space proportionally" started.
◇ Test "Wrap and clip emoji with borders without exceeding width" started.
◇ Test "Yoga layout engine singleton" started.
◇ Test "Yoga node creation and cleanup" started.
◇ Test "Flex shrink reduces size proportionally when space is insufficient" started.
◇ Test "Padding affects child positioning" started.
◇ Test "Min and max height constraints work in column direction" started.
◇ Test "Snapshot: Emoji-safe terminal layout" started.
◇ Test "Rounding rules for fractional coordinates" started.
◇ Test "Row layout with nested column layouts" started.
◇ Test "Snapshot: Complex dashboard layout with flex grow/shrink" started.
◇ Test "Combined SGR emitted once, avoid resets between non-default spans" started.
◇ Test "Empty children array returns empty rects" started.
◇ Test "Vertical overflow is clipped in wrapped layout" started.
◇ Test "Justify content and align items with padding" started.
◇ Test "Edge case: Zero dimensions" started.
◇ Test "Flex wrap respects emoji-safe width boundaries" started.
◇ Test "TrueColor preserves RGB and 256" started.
◇ Test "Snapshot: Responsive card grid with wrapping" started.
◇ Test "Flex basis sets initial size before grow/shrink" started.
◇ Test "Parametric matrix: alignItems × justifyContent × flexWrap × direction" started.
◇ Test "Avoid final reset if already reset when transitioning to default" started.
◇ Test "Overflow is clipped at wrap boundaries" started.
◇ Test "Prevent color bleed across wrapped lines" started.
◇ Test "Snapshot: Constrained layout with min/max bounds" started.
◇ Test "Complex nested layout with mixed properties" started.
◇ Test "noColor strips all color but keeps effects" started.
◇ Test "basic16 maps RGB and 256 to 16-colors" started.
◇ Test "xterm256 maps RGB to 256" started.
◇ Test "Basic style enable/disable and colors" started.
◇ Test "Split styled text with last column guard" started.
◇ Test "Max width constraint prevents growing beyond maximum" started.
◇ Test "Split styled text with grapheme cluster boundary protection" started.
◇ Test "Reset clears all attributes" started.
◇ Test "Wrap produces lines that rejoin to original ignoring resets" started.
◇ Test "RUNE-19 Acceptance Criteria: ANSI-aware wrap & slice comprehensive test" started.
◇ Test "Split styled text by display width with CJK characters" started.
◇ Test "Wrap styled text preserving ANSI formatting" started.
◇ Test "Split preserves SGR and grapheme boundaries" started.
◇ Test "YogaWrapper mappings use expected raw values" started.
◇ Test "Wrap mixed ANSI styled text with emoji and CJK characters" started.
◇ Test "Convert plain text tokens to spans" started.
◇ Test "256 and RGB colors" started.
◇ Test "Convert tokens with only SGR (no text)" started.
◇ Test "Min width constraint prevents shrinking below minimum" started.
◇ Test "Slice mixed content preserving grapheme clusters" started.
◇ Test "Slice styled text by display columns" started.
◇ Test "Convert RGB color spans to tokens" started.
◇ Test "Convert empty token array" started.
◇ Test "Convert plain text spans to tokens" started.
◇ Test "Convert empty styled text to tokens" started.
◇ Test "Convert multiple spans to tokens" started.
◇ Test "Split styled text by display width preserving grapheme clusters" started.
◇ Test "CJK character detection" started.
◇ Test "Convert 256-color spans to tokens" started.
◇ Test "Convert RGB color tokens to spans" started.
◇ Test "Convert simple SGR tokens to spans" started.
◇ Test "Complex SGR sequence preservation across splits" started.
◇ Test "Handle malformed SGR parameters gracefully" started.
◇ Test "Generator avoids redundant SGR when attributes unchanged" started.
◇ Test "Convert styled spans to tokens" started.
◇ Test "Category detection performance" started.
◇ Test "Flex wrap creates new line when content overflows" started.
◇ Test "Convert multiple SGR tokens to spans" started.
◇ Test "Inverse with explicit fg and bg keeps both color codes" started.
◇ Test "Invalid 256-color SGR parameter is ignored gracefully" started.
◇ Test "Last column guard prevents wide character overflow" started.
◇ Test "Convert mixed tokens with non-SGR sequences" started.
◇ Test "Multiple SGR parameters" started.
◇ Test "Box layout doesn't interfere with FlexLayout performance" started.
◇ Test "Box layout maintains FlexLayout immutability principles" started.
◇ Test "Generator omits SGR for invalid color values in attributes" started.
◇ Test "Whitespace characters" started.
◇ Test "Wrap preserves ZWJ family across lines" started.
◇ Test "Split never breaks ZWJ family at boundary" started.
◇ Test "Handle empty text in display width operations" started.
◇ Test "Invalid RGB SGR parameters are ignored gracefully" started.
◇ Test "Plain text without ANSI codes" started.
◇ Test "Unicode version information" started.
◇ Test "Convert 256-color tokens to spans" started.
◇ Test "Unicode normalization NFC" started.
◇ Test "Box layout API is consistent with FlexLayout patterns" started.
◇ Test "Box layout respects FlexLayout coordinate system" started.
◇ Test "Unicode normalization NFKC" started.
◇ Test "Empty string returns empty array" started.
◇ Test "Unicode normalization NFKD" started.
◇ Test "Control characters have zero width" started.
◇ Test "Basic ANSI colors" started.
◇ Test "Combining marks have zero width" started.
◇ Test "Box layout integrates with Text component sizing" started.
◇ Test "Box layout works with nested Box components" started.
◇ Test "Default text attributes should have no styling" started.
◇ Test "Box layout handles FlexLayout.Rect edge cases" started.
◇ Test "256-color palette" started.
◇ Test "Control character detection" started.
◇ Test "Snapshot: 16-color + effects" started.
◇ Test "Box layout produces compatible rectangles with FlexLayout" started.
◇ Test "Run basic conversion example" started.
◇ Test "Run merging spans example" started.
◇ Test "Preserve child state across reordering with stable identity" started.
◇ Test "Snapshot: 256 and truecolor" started.
◇ Test "StrategyDeterminer chooses full redraw on nil current or forced" started.
◇ Test "Unicode normalization NFD" started.
◇ Test "Basic Latin characters" started.
◇ Test "Combining mark detection" started.
◇ Test "Simple SGR color code" started.
◇ Test "FlexLayout.calculateLayout still works with existing API" started.
◇ Test "Text attributes equality" started.
◇ Test "RGB colors" started.
◇ Test "String with combining marks" started.
◇ Test "FullRedrawPolicy triggers by time/frames/quality" started.
◇ Test "Split span at character boundary" started.
◇ Test "Run all attributes example" started.
◇ Test "Complex attribute combinations" started.
◇ Test "Performance benchmark: ASCII baseline" started.
◇ Test "OSC window title with ST terminator parses and canonicalizes to BEL on encode" started.
◇ Test "ASCII letter category detection" started.
◇ Test "OSC window title with BEL terminator round-trips identically" started.
◇ Test "Performance benchmark: Enhanced width calculation" started.
◇ Test "Text attributes with color" started.
◇ Test "Text attributes with bold styling" started.
◇ Test "Split span by display width with emoji" started.
◇ Test "Run complex colors example" started.
◇ Test "Run splitting text example" started.
◇ Test "Zero-width characters handling" started.
◇ Test "Split span with last column guard" started.
◇ Test "Erase display all (CSI 2J)" started.
◇ Test "Split span by display width with CJK" started.
◇ Test "Split span at end" started.
◇ Test "AdaptiveQualityController reduces quality on backpressure and applies no-op" started.
◇ Test "Text span equality" started.
◇ Test "Delete character width" started.
◇ Test "Split span at beginning" started.
◇ Test "Unicode text handling" started.
◇ Test "RenderMetricsRecorder records and adapts thresholds" started.
◇ Test "Text span with styled attributes" started.
◇ Test "Grapheme cluster API for combining character" started.
◇ Test "ASCII string with spaces" started.
◇ Test "ASCII scalar width" started.
◇ Test "Grapheme cluster API for simple ASCII" started.
◇ Test "Split at invalid indices" started.
◇ Test "Control character scalar width" started.
◇ Test "Unterminated OSC is treated as plain text (no .osc token)" started.
◇ Test "Emoji scalar detection" started.
◇ Test "Cursor up by 3 (CSI A)" started.
◇ Test "Erase line to end (CSI K with default)" started.
◇ Test "Empty string has zero width" started.
◇ Test "Null character width" started.
◇ Test "Golden test: Transgender flag emoji" started.
◇ Test "Full redraw when no current grid or dimensions changed" started.
◇ Test "Golden test: Chinese ideograph" started.
◇ Test "Golden test: End-of-line scenarios" started.
◇ Test "Golden test: Fullwidth comma" started.
◇ Test "LogLane includes timestamps when enabled" started.
◇ Test "Golden test: Slightly smiling face emoji" started.
◇ Test "Grapheme cluster API for East Asian character" started.
◇ Test "Delta when small change and thresholds OK" started.
◇ Test "Performance benchmark for common strings" started.
◇ Test "Style toggles maintain correctness with minimal emissions" started.
◇ Test "Golden test: Japanese flag emoji" started.
✘ Test "Simple emoji width" skipped: "Will be implemented in next iteration"
◇ Test "LogLane initialization" started.
◇ Test "Space character width" started.
✘ Test "Complex emoji width" skipped: "Will be implemented in next iteration"
✘ Test "Flag emoji width" skipped: "Will be implemented in next iteration"
◇ Test "LogLane custom configuration" started.
◇ Test "LogLane calculates display height" started.
◇ Test "LogLane formats single log line" started.
◇ Test "Common style combinations produce ANSI and reset" started.
✘ Test "Mixed ASCII and emoji" skipped: "Will be implemented in next iteration"
◇ Test "Color change does not emit unnecessary reset" started.
◇ Test "Clear screen" started.
◇ Test "Text span with plain text" started.
◇ Test "ASCII characters have width 1" started.
◇ Test "Large text performance" started.
◇ Test "Basic EP boundary checks" started.
◇ Test "Golden test: Family emoji ZWJ sequence" started.
◇ Test "Symbol category detection" started.
◇ Test "LogLane formats multiple logs" started.
◇ Test "Cursor right default 1 (CSI C with no param)" started.
✘ Test "Time-aware Transform produces different output over time" skipped: "Timing-sensitive test that can hang"
◇ Test "Merge adjacent compatible spans" started.
◇ Test "Round-trip conversion preserves complex styling" started.
◇ Test "East Asian scalar width" started.
◇ Test "Move cursor" started.
◇ Test "LogLane wraps long lines" started.
◇ Test "Show cursor" started.
◇ Test "LogLane creates separator" started.
◇ Test "Number category detection" started.
◇ Test "LogLane predefined configurations" started.
◇ Test "Frame buffer initialization" started.
◇ Test "Hide cursor" started.
◇ Test "Round-trip conversion preserves plain text" started.
◇ Test "Renderer respects hideCursorDuringRender=false" started.
◇ Test "Renderer per-line writes are atomic relative to external logs" started.
◇ Test "Don't merge spans with different attributes" started.
◇ Test "Time-aware Transform with constant transform behaves like normal Transform and preserves ANSI" started.
◇ Test "Round-trip conversion preserves simple styling" started.
◇ Test "Atomic writes reduce syscalls vs unbatched writes" started.
◇ Test "Frame initialization" started.
◇ Test "Empty frame" started.
◇ Test "Backpressure policies are documented and configurable" started.
◇ Test "Handle empty spans in merge" started.
◇ Test "LogLane formats stderr with different prefix" started.
◇ Test "Renderer initialization with custom output" started.
◇ Test "Round-trip conversion preserves 256-color" started.
◇ Test "LogLane respects max display lines" started.
◇ Test "Render simple frame" started.
◇ Test "Renderer respects hideCursorDuringRender=true (default)" started.
◇ Test "Styled text with single span" started.
◇ Test "Transform uppercasing keeps styles and transforms content only" started.
◇ Test "East Asian Width - Chinese ideographs" started.
◇ Test "Merge multiple adjacent compatible spans" started.
◇ Test "exit(error:) uses default code 1 for plain errors" started.
✘ Test "Japanese characters width" skipped: "Will be implemented in next iteration"
◇ Test "Split styled text at column boundary" started.
◇ Test "Round-trip conversion preserves RGB color" started.
◇ Test "East Asian Width - Halfwidth characters" started.
◇ Test "Styled text with multiple spans" started.
◇ Test "exit(error:) uses provided custom exit code when error conforms" started.
◇ Test "Backpressure dropNewest drops when buffer is full" started.
◇ Test "Renderer initialization with default output" started.
◇ Test "East Asian Width - Fullwidth characters" started.
◇ Test "exit(nil) yields code 0 (success)" started.
◇ Test "wrappedLines preserves ANSI and avoids bleed with emojis/ZWJ/CJK" started.
◇ Test "Empty styled text" started.
◇ Test "East Asian Width - Japanese characters" started.
◇ Test "Alignment works correctly with borders and padding" started.
◇ Test "AlignSelf options work correctly and override parent alignItems" started.
◇ Test "Punctuation category detection" started.
◇ Test "useRef identity persists across rerenders and does not trigger rerender on mutation" started.
◇ Test "AlignItems options work correctly in row layout" started.
✘ Test "Chinese characters width" skipped: "Will be implemented in next iteration"
◇ Test "Serializes concurrent writes without interleaving (atomic)" started.
◇ Test "Global input handlers receive events regardless of focus; others are gated" started.
◇ Test "Empty text with styling renders empty line" started.
◇ Test "Tab cycles focus among focusable elements and gates input to focused one" started.
◇ Test "Batched writes reduce syscalls vs unbatched" started.
◇ Test "When no focusables are registered, useInput remains broadcast to all active handlers (back-compat)" started.
◇ Test "Color override: last wins" started.
◇ Test "Detect one-line downward scroll and emit scroll sequence" started.
◇ Test "Default: Renderer and external atomic writes do not interleave" started.
◇ Test "Text init with style renders correctly" started.
◇ Test "JustifyContent options work correctly in row layout" started.
◇ Test "Snapshot: wrap mixed styles + emoji/ZWJ/CJK" started.
◇ Test "F1-F4 (SS3), F6-F12 (CSI), Home/End/Page with modifiers, Shift+Ctrl" started.
◇ Test "unmount() is idempotent - multiple calls are safe" started.
✘ Test "clear() clears screen content" skipped: "Disabled to prevent CI hanging on pipe reads"
◇ Test "Chainable modifiers compose and render" started.
◇ Test "Double.nan encodes to a stable deps token across commits" started.
◇ Test "Custom Hashable with changing description triggers deps change" started.
◇ Test "useMemo recomputes only when deps change" started.
◇ Test "Overlay last-wins and conversion to attributes" started.
◇ Test "Styled text plain text extraction" started.
✘ Test "Integration test: Complete render handle lifecycle" skipped: "Timing-sensitive tests that can hang"
◇ Test "Borders get colored and background fills content area without bleed" started.
◇ Test "waitUntilExit() resolves when unmount() is called" started.
◇ Test "Identity wrapper opts into object-identity dep semantics" started.
✘ Test "Concurrency safety: multiple simultaneous operations" skipped: "Timing-sensitive tests that can hang"
◇ Test "clear() is safe to call multiple times" started.
◇ Test "Signed zeroes: 0.0 and -0.0 are distinct and trigger reruns" started.
◇ Test "Spacer works correctly with different alignment combinations" started.
◇ Test "RenderOptions initialization with defaults" started.
◇ Test "unmount() tears down resources and makes handle inactive" started.
◇ Test "RenderOptions CI environment heuristics" started.
◇ Test "waitUntilExit() resolves immediately if already unmounted" started.
✘ Test "clear() with alternate screen clears properly" skipped: "Disabled to prevent CI hanging on pipe reads"
✘ Test "Integration test: View to Component conversion" skipped: "Timing-sensitive tests that can hang"
✘ Test "Concurrency safety: multiple waitUntilExit calls" skipped: "Timing-sensitive tests that can hang"
◇ Test "Multi-children ANSI/emoji placement uses display columns and no overlap" started.
◇ Test "Text component with CJK style combinations" started.
◇ Test "Box supports alignSelf property" started.
◇ Test "RenderOptions TTY detection" started.
◇ Test "Text component with width constraint and styling" started.
◇ Test "RenderOptions initialization with custom values" started.
◇ Test "Text component with simple content" started.
◇ Test "useEffect deps sugar: nil runs every commit, [] mount-only, values trigger rerun" started.
✘ Test "Integration test: Signal handler properly calls unmount" skipped: "Timing-sensitive tests that can hang"
◇ Test "AlignSelf center overrides parent alignItems" started.
◇ Test "Text component plain text has no ANSI codes" started.
✘ Test "Integration test: Terminal size detection" skipped: "Timing-sensitive tests that can hang"
◇ Test "Box with minimum dimensions handles borders correctly" started.
◇ Test "Opt-out: Without shared writer, ordering between lines is not guaranteed" started.
◇ Test "Text component with CJK characters and styling" started.
◇ Test "Static component ordering consistency" started.
◇ Test "Text component with emoji style combinations" started.
◇ Test "Spacer with no available space has zero size" started.
◇ Test "Static component immutability" started.
◇ Test "Text component with content longer than width" started.
◇ Test "Transform preserves ANSI sequences correctly" started.
◇ Test "Text component with dim styling" started.
◇ Test "createBoxFrame with emoji renders borders correctly" started.
◇ Test "Text component with underline styling" started.
◇ Test "Text supports combined styles including inverse and colors" started.
◇ Test "Static component with emoji width constraint" started.
◇ Test "Newline component with zero height renders no lines" started.
◇ Test "Transform with zero dimensions returns empty" started.
◇ Test "Box with border and padding renders correctly" started.
◇ Test "Static component with multiple lines" started.
◇ Test "Empty box component" started.
◇ Test "Transform handles emoji and Unicode correctly" started.
◇ Test "Text ignores invalid color components when using RGB/256" started.
◇ Test "Text component reset code placement" started.
◇ Test "Box with too small dimensions gracefully degrades" started.
◇ Test "Spacer does not affect cross-axis sizing" started.
◇ Test "Text component RGB and 256 color snapshots" started.
◇ Test "Spacer component exists and conforms to Component protocol" started.
✘ Test "Concurrency safety: unmount during other operations" skipped: "Timing-sensitive tests that can hang"
◇ Test "Box with CJK content handles width correctly" started.
◇ Test "Text component with bold styling" started.
◇ Test "Static component with CJK characters" started.
◇ Test "Text component with multiple lines prevents color bleed" started.
◇ Test "Box with Text child renders emoji correctly" started.
◇ Test "Text component with RGB color" started.
◇ Test "No color bleed across lines" started.
◇ Test "Static component View protocol conformance" started.
◇ Test "Box with text child" started.
◇ Test "Transform chains multiple transformations correctly" started.
◇ Test "Spacer renders as empty content" started.
◇ Test "Static component with emoji content" started.
◇ Test "HybridReconciler exposes timing consistent with fpsCap" started.
◇ Test "Transform component exists and conforms to Component protocol" started.
◇ Test "Spacer in column layout consumes remaining vertical space" started.
◇ Test "Box with single border renders correctly" started.
◇ Test "Spacer in row layout consumes remaining horizontal space" started.
◇ Test "Newline component with count 0 renders no lines" started.
◇ Test "AlignSelf auto inherits from parent alignItems" started.
◇ Test "Text component style combination snapshots" started.
◇ Test "Newline component exists and conforms to Component protocol" started.
◇ Test "Newline component with count 3 renders three newlines" started.
◇ Test "Text component with multiple styles" started.
◇ Test "Box with system monitor style content renders correctly" started.
◇ Test "Box with emoji content handles width correctly" started.
◇ Test "Static component with zero dimensions" started.
◇ Test "Static component with single line" started.
◇ Test "Text component with zero width" started.
◇ Test "Newline component produces no SGR leakage" started.
◇ Test "Text component with zero height" started.
◇ Test "Newline component with negative count treats as zero" started.
◇ Test "Box with rounded border renders correctly" started.
◇ Test "Text component with background color" started.
◇ Test "Text component with empty content has no color bleed" started.
◇ Test "Transform with Box preserves borders correctly" started.
◇ Test "Newline component with count 1 renders single newline" started.
◇ Test "Newline component respects height constraint" started.
◇ Test "Text component with emoji and styling" started.
◇ Test "Text component with inverse styling" started.
◇ Test "Newline component with zero width renders correctly" started.
◇ Test "AlignSelf enum exists with all required cases" started.
◇ Test "Text component with zero dimensions" started.
◇ Test "Transform applies simple string transformation" started.
◇ Test "Box border rendering with emoji content" started.
◇ Test "Text component with strikethrough styling" started.
◇ Test "Box with border renders correctly" started.
◇ Test "Grid omits wide cluster at EOL (CJK fullwidth)" started.
◇ Test "Grid omits wide cluster at EOL (fullwidth punctuation)" started.
◇ Test "Text component with no styling should not add ANSI codes" started.
◇ Test "Box with zero dimensions" started.
◇ Test "Newline component with large count respects height constraint" started.
◇ Test "Text component with 256 color" started.
◇ Test "Static component with width constraint" started.
◇ Test "Grid omits wide cluster at EOL (emoji)" started.
◇ Test "Text component prevents color bleed at line boundaries" started.
◇ Test "DECAWM toggles off/on around delta update when enabled" started.
◇ Test "Box with border style none" started.
◇ Test "Text component with special characters and styling" started.
✘ Test "Ticker ticks and cancellation stops future ticks (robust)" skipped: "Timing-sensitive test that can hang"
◇ Test "ANSI-aware display width calculation" started.
◇ Test "Box with border and content renders correctly" started.
◇ Test "RUNE27 demo Spacer examples work correctly" started.
◇ Test "Text component with color styling" started.
◇ Test "DECAWM toggles off/on around full redraw when enabled" started.
◇ Test "Newline component View protocol conformance" started.
◇ Test "Transform with nested styled components preserves all ANSI" started.
◇ Test "Transform with empty child renders empty" started.
◇ Test "runAppAndReturnExitCode returns the app's exit code" started.
◇ Test "Multiple spacers divide remaining space equally" started.
◇ Test "Transform handles complex ANSI sequences without breaking them" started.
◇ Test "AlignSelf stretch makes child fill cross-axis" started.
◇ Test "Spacer remains minimal on cross-axis under alignItems: .stretch" started.
◇ Test "FileHandleOutputEncoder writes to pipe" started.
◇ Test "Box with double border renders correctly" started.
◇ Test "Text component with empty content and styling" started.
◇ Test "Conditional helpers apply only when condition is true" started.
◇ Test "Static component with height constraint" started.
✘ Test "FrameBuffer stops console capture on clear" skipped: "Interferes with test runner stdout/stderr"
◇ Test "ANSICursorManager emits sequences" started.
◇ Test "Text component with italic styling" started.
◇ Test "Box with multiple Text children renders correctly" started.
◇ Test "Static component with empty lines" started.
◇ Test "Identity change resets diff state" started.
✘ Test "FrameBuffer console capture integration" skipped: "Interferes with test runner stdout/stderr"
◇ Test "RUNE32 real-world layout patterns work correctly" started.
◇ Test "Hex color helpers parse and apply when valid, ignore when invalid" started.
✘ Test "Console capture maintains log order" skipped: "Interferes with test runner stdout/stderr"
✘ Test "Console capture clear buffer" skipped: "Interferes with test runner stdout/stderr"
✘ Test "Console capture start and stop" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Alternate screen buffer with grid rendering" started.
✘ Test "Console capture handles multiple stdout messages" skipped: "Interferes with test runner stdout/stderr"
◇ Test "ANSI SGR inside content should not consume columns; right border remains visible" started.
◇ Test "Multiple frame renders in alternate screen" started.
◇ Test "RUNE-23 acceptance criteria validation (CI-safe)" started.
✘ Test "Console capture buffers log lines" skipped: "Interferes with test runner stdout/stderr"
◇ Test "helper returns 0 when app exits with nil error" started.
◇ Test "Second render clears previous region line-by-line before writing new content" started.
✘ Test "Console capture recent logs" skipped: "Interferes with test runner stdout/stderr"
✘ Test "Console capture multiple start calls are safe" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Configuration precedence" started.
◇ Test "First render writes lines and positions cursor below frame (no full screen clear in ink style)" started.
◇ Test "Console capture initialization" started.
◇ Test "Complete alternate screen buffer workflow" started.
◇ Test "SignalHandler initialization" started.
◇ Test "Describe changes produces readable output" started.
◇ Test "Estimate byte savings for inefficient diff" started.
✘ Test "Console capture multiple stop calls are safe" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Box prevents emoji clipping at border edges" started.
◇ Test "Single line change" started.
◇ Test "SignalHandler install and cleanup" started.
◇ Test "Frame grows - new lines added" started.
✘ Test "Console capture ordering validation" skipped: "Interferes with test runner stdout/stderr"
✘ Test "PTY integration validates ordering" skipped: "Interferes with test runner stdout/stderr"
✘ Test "RuneCLI exits promptly in test mode" skipped.
◇ Test "Environment variable configuration integration" started.
◇ Test "Identical frames - no changes" started.
◇ Test "SignalHandler graceful teardown callback" started.
◇ Test "Estimate byte savings for efficient diff" started.
◇ Test "Generate ANSI sequences for multiple changes" started.
◇ Test "Hook receives arrow/function/ctrl/meta keys" started.
◇ Test "Block policy flushes immediately and clears buffer for oversized data" started.
◇ Test "No previous frame - all lines are changes" started.
◇ Test "Plain text uppercase is applied directly" started.
◇ Test "Shutdown with alternate screen cleanup" started.
◇ Test "Empty changes produce empty sequences" started.
◇ Test "Line-diff mode renders single line change efficiently" started.
◇ Test "isActive gates handler" started.
✘ Test "Console capture buffer size limit" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Generate ANSI sequences for single change" started.
◇ Test "Concurrent clear/rerender/unmount is safe" started.
◇ Test "Time-based transform on single ANSI span applies to text and preserves SGR" started.
✘ Test "FrameBuffer console capture disabled by default" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Strict: No content before enter; none after leave" started.
◇ Test "Unsubscribe on unmount; no leaks" started.
◇ Test "ANSI-styled text preserves SGR and uppercases text" started.
◇ Test "Empty frame renders correctly" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE=false disables console capture" started.
◇ Test "Line-diff handles frame growth correctly" started.
◇ Test "Delta renders restore cursor to end-of-frame" started.
◇ Test "Line-diff handles frame shrinkage correctly" started.
◇ Test "Large frame falls back to full redraw" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE case insensitive" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE=0 disables console capture" started.
◇ Test "Full redraw mode renders all lines" started.
◇ Test "Frame shrinks - lines removed" started.
◇ Test "Automatic mode chooses appropriate optimization" started.
✘ Test "useEffect runs on mount and cleanup runs on unmount; requestRerender drives ~10-12 Hz" skipped: "Timing-sensitive test that can hang"
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE=1 enables console capture" started.
◇ Test "Meta: ESC-prefixed ASCII letter is delivered" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=0 disables alternate screen" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=true enables alternate screen" started.
◇ Test "Custom configuration accepts all parameters" started.
◇ Test "Performance tuning accepts custom values" started.
✘ Test "Effect re-runs on deps change and previous cleanup executes" skipped: "Timing-sensitive test that can hang"
◇ Test "Automatic mode makes intelligent decisions" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=TRUE enables alternate screen" started.
◇ Test "High frame rate allows more frequent updates" started.
◇ Test "Conservative configuration has safe settings" started.
◇ Test "Environment variable RUNE_ALT_SCREEN not set uses default" started.
◇ Test "Multiple line changes" started.
◇ Test "Environment configuration reads render mode" started.
◇ Test "Full redraw mode always returns full redraw" started.
◇ Test "Frame buffer handles cursor management" started.
◇ Test "Default configuration has expected values" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=1 enables alternate screen" started.
◇ Test "Frame buffer cleanup on abrupt termination" started.
◇ Test "Delta with no changes keeps cursor at end-of-frame" started.
◇ Test "Frame buffer handles multiple errors gracefully" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE not set uses default" started.
◇ Test "Frame buffer handles empty frames" started.
◇ Test "Frame buffer handles frame height shrinkage" started.
◇ Test "Performance tuning has reasonable defaults" started.
◇ Test "Time-based transform on plain text uses provided time" started.
◇ Test "Optimization mode enum has all expected cases" started.
◇ Test "Environment variable RUNE_DEBUG enables console capture" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=false disables alternate screen" started.
✘ Test "Integration test: render function with mock view" skipped: "Disabled to prevent CI interference"
◇ Test "Frame rate limiting works correctly" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE=true enables console capture" started.
◇ Test "Hooks surface configured custom streams" started.
◇ Test "RenderHandle with signal handler" started.
◇ Test "State preserves across rerenders with stable identity" started.
◇ Test "HybridReconciler uses injected differ for delta path" started.
◇ Test "High performance configuration has aggressive settings" started.
◇ Test "Cursor restoration on error" started.
◇ Test "Configuration is accessible and correct" started.
◇ Test "Line diff mode respects frame size limits" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=invalid disables alternate screen" started.
◇ Test "useApp().exit() triggers unmount and resolves waitUntilExit" started.
◇ Test "useApp().clear() stops console capture but keeps handle active" started.
◇ Test "RenderHandle with console capture" started.
◇ Test "Frame rate limiting drops frames when appropriate" started.
◇ Test "Benchmark: Single line changes favor line-diff" started.
◇ Test "Benchmark: No changes favor line-diff" started.
◇ Test "Line diff mode respects efficiency threshold" started.
◇ Test "Multiple frame renders maintain state" started.
◇ Test "Debounced resize burst triggers a single rerender" started.
◇ Test "Default environment streams are exposed with metadata" started.
◇ Test "Benchmark: All lines changing favors full redraw" started.
◇ Test "Resize during render does not crash and yields a single repaint per burst" started.
◇ Test "Frame rate limiting allows frames when under limit" started.
◇ Test "RuneKit module loads correctly" started.
◇ Test "Cleanup on frame buffer deinitialization" started.
◇ Test "Debug configuration enables extensive logging" started.
◇ Test "Default configuration has sensible values" started.
◇ Test "Optimization mode raw values are correct" started.
◇ Test "Performance metrics are collected correctly" started.
◇ Test "Two distinct bursts cause two rerenders" started.
◇ Test "RenderHandle initialization and basic functionality" started.
◇ Test "Configuration is immutable after creation" started.
◇ Test "Performance history accumulates over multiple renders" started.
◇ Test "Benchmark: Automatic mode makes good decisions" started.
◇ Test "Box renders different border styles correctly" started.
◇ Test "Box works with HybridReconciler optimization strategies" started.
◇ Test "Detect two-line upward scroll and emit ESC[2T and write 2 lines at top" started.
◇ Test "Box works with render() function and RenderHandle" started.
◇ Test "Box layout maintains performance with complex hierarchies" started.
◇ Test "Box renders borders correctly with proper layout" started.
◇ Test "Box integrates with existing Component system" started.
◇ Test "Composite view body is converted to Box/Text and renders border glyphs" started.
◇ Test "Detect two-line downward scroll and emit ESC[2S and write 2 lines" started.
◇ Test "Box integrates with FrameBuffer rendering" started.
◇ Test "Box layout integrates with FlexLayout coordinate system" started.
◇ Test "Box integrates with View protocol and render pipeline" started.
◇ Test "Box layout works consistently across platforms" started.

=== Emoji-Safe Layout Snapshot ===
Container: 25x5

=== Dashboard Layout Snapshot ===
Container: 100x40

=== Responsive Card Grid Snapshot ===
Container: 80x60, Card size: 30x20
Expected: 2 cards per row (30+30=60 < 80), 2 rows
◇ Test "No-focusables broadcast remains unaffected by manager" started.

=== Constrained Layout Snapshot ===
Emoji header (8 cols): Rect(x: 0, y: 0, width: 8, height: 3)
Sidebar (flexShrink: 0, minWidth: 15): Rect(x: 0, y: 0, width: 20, height: 30)
Card 1: Rect(x: 0, y: 0, width: 30, height: 20)
Container: 120x30
Card 2: Rect(x: 30, y: 0, width: 30, height: 20)
◇ Test "Direct focus by id/path works" started.
◇ Test "Programmatic next/previous cycles focus and gates input" started.
Card 3: Rect(x: 0, y: 20, width: 30, height: 20)
Flexible (grow:1, min:20, max:40): Rect(x: 0, y: 0, width: 40, height: 25)
Main (flexGrow: 1): Rect(x: 20, y: 0, width: 55, height: 30)
Fixed (30px, no flex): Rect(x: 40, y: 0, width: 30, height: 25)
Card 4: Rect(x: 30, y: 20, width: 30, height: 20)
Constrained (grow:2, min:15, max:35): Rect(x: 70, y: 0, width: 35, height: 25)
Text content (flexGrow: 1): Rect(x: 8, y: 0, width: 15, height: 3)
Right Panel (flexShrink: 2, minWidth: 10): Rect(x: 75, y: 0, width: 25, height: 30)
Status icon (2 cols): Rect(x: 23, y: 0, width: 2, height: 3)
◇ Test "Bracketed paste emits single paste event when enabled" started.
◇ Test "Ctrl-C triggers unmount when exitOnCtrlC=true via InputManager path" started.
◇ Test "Integration: RenderHandle unmount cleans up input manager and paste mode" started.
◇ Test "Wraps colored emoji/CJK by display columns and preserves right edge" started.
◇ Test "Decodes arrows and Ctrl-C/ Ctrl-D bytes" started.
✅ RUNE-19 All acceptance criteria verified successfully!
◇ Test "Chunked ESC sequence is decoded when complete" started.
◇ Test "Decodes modifiers for arrow keys (Ctrl)" started.
◇ Test "Decodes SS3 arrows and F1-F4" started.
✔ Test "Truncate appends reset and prevents style bleed" passed after 0.008 seconds.
◇ Test "Decodes CSI function keys F5-F12 and PageUp/Down" started.
◇ Test "Bracketed paste with UTF-8 payload (emoji)" started.

=== Merging Spans Example ===
Before merging: 3 spans
  'Hello '
  'beautiful '
  'world'
After merging: 1 spans
  'Hello beautiful world'
=== Basic Conversion Example ===
Input (raw): "\u{1B}[1;31mError:\u{1B}[0m \u{1B}[33mWarning message\u{1B}[0m"
Spans:

=== All Attributes Example ===
All attributes ANSI (raw): "\u{1B}[1;2;3;4;7;9;36;40mAll attributes\u{1B}[0m"
  0: 'Error:' (bold red)
  1: ' ' (plain)
  2: 'Warning message' (yellow)
Attribute preservation:
  Color: true
  Background: true
Round-trip (raw): "\u{1B}[1;31mError:\u{1B}[0m \u{1B}[33mWarning message\u{1B}[0m"
  Bold: true
  Italic: true
  Underline: true
  Inverse: true
  Strikethrough: true
  Dim: true
Identical: true

=== Splitting Text Example ===
Original text: 'Hello beautiful world!'
Length: 22
Split at column 10:
  Left: 'Hello beau' (2 spans)
  Right: 'tiful world!' (2 spans)

=== Complex Colors Example ===
Complex colors ANSI (raw): "\u{1B}[31mBasic red \u{1B}[38;5;196m256-color \u{1B}[38;2;255;165;0mRGB orange\u{1B}[0m"
    Left span 0: 'Hello ' - TextAttributes(color: Optional(RuneANSI.ANSIColor.red), backgroundColor: nil, bold: false, italic: false, underline: false, inverse: false, strikethrough: false, dim: false)
    Left span 1: 'beau' - TextAttributes(color: nil, backgroundColor: nil, bold: true, italic: false, underline: false, inverse: false, strikethrough: false, dim: false)
Round-trip verification:
    Right span 0: 'tiful ' - TextAttributes(color: nil, backgroundColor: nil, bold: true, italic: false, underline: false, inverse: false, strikethrough: false, dim: false)
  Span 0: 'Basic red ' - Color: red
    Right span 1: 'world!' - TextAttributes(color: Optional(RuneANSI.ANSIColor.blue), backgroundColor: nil, bold: false, italic: false, underline: false, inverse: false, strikethrough: false, dim: false)
  Span 1: '256-color ' - Color: color256(196)
  Span 2: 'RGB orange' - Color: rgb(255, 165, 0)
◇ Test "AlternateScreenBuffer double enter is safe" started.
◇ Test "AlternateScreenBuffer initialization" started.
◇ Test "rerender() handles view identity changes" started.
◇ Test "AlternateScreenBuffer enter sequence" started.
✘ Test "rerender() updates UI content" skipped: "Disabled to prevent CI hanging on pipe reads"
◇ Test "AlternateScreenBuffer double leave is safe" started.
◇ Test "Frame height shrinkage cleanup" started.
◇ Test "rerender() is safe to call multiple times rapidly" started.
◇ Test "AlternateScreenBuffer explicit cleanup" started.
◇ Test "rerender() preserves state for same view identity" started.
◇ Test "Region repaint with cursor management" started.
◇ Test "AlternateScreenBuffer with fallback enabled" started.
◇ Test "AlternateScreenBuffer fallback behavior" started.
◇ Test "In-place repaint without flicker" started.
◇ Test "AlternateScreenBuffer leave sequence" started.
◇ Test "Debug: FrameBuffer default behavior without alternate screen" started.
◇ Test "FrameBuffer with alternate screen buffer disabled" started.
◇ Test "FrameBuffer with alternate screen buffer enabled" started.
Width calculation:
  Content: 'Complete! ✅'
  Content display width: 12
  Total width: 16
◇ Test "Efficiency calculation is correct" started.
◇ Test "Set total lines updates correctly" started.
◇ Test "Concurrent access is thread-safe" started.
◇ Test "Start render initializes tracking" started.
createBoxFrame output:
Line 0: '┌──────────────┐' (length: 16)
Line 1: '│ Complete! ✅ │' (length: 15)
Line 2: '└──────────────┘' (length: 16)
◇ Test "Bytes per line with zero lines changed" started.
◇ Test "Reset clears all metrics" started.
◇ Test "Average performance calculation" started.
Content line: '│ Complete! ✅     │'
Content line scalars: [9474, 32, 67, 111, 109, 112, 108, 101, 116, 101, 33, 32, 9989, 32, 32, 32, 32, 32, 9474]
◇ Test "Bytes per line calculation" started.
◇ Test "Record lines changed accumulates correctly" started.
Frame structure:
  Width: 16
  Height: 3
  Lines count: 3
  Frame line 0: '┌──────────────┐' (length: 16)
  Frame line 1: '│ Complete! ✅ │' (length: 15)
  Frame line 2: '└──────────────┘' (length: 16)
◇ Test "Record bytes written accumulates correctly" started.
DEBUG: Border calculation analysis
  Content: '🎯 Welcome to RuneKit!'
◇ Test "History respects maximum size limit" started.
  Content display width: 22
◇ Test "Record dropped frame increments counter" started.
◇ Test "Efficiency with zero total lines" started.
  Expected total width: 28
  Using wide width: 100
◇ Test "Multiple renders build history" started.
DEBUG: All lines:
◇ Test "Initial state is empty" started.
  Line 0: '┌──────────────────┐' (length: 20)
    Char 0: '┌' (Unicode: \u{250c})
    Char 1: '─' (Unicode: \u{2500})
    Char 2: '─' (Unicode: \u{2500})
    Char 3: '─' (Unicode: \u{2500})
    Char 4: '─' (Unicode: \u{2500})
    Char 5: '─' (Unicode: \u{2500})
Grid structure:
  Width: 16
  Height: 3
  Grid line 0: '┌──────────────┐' (length: 16)
  Grid line 1: '│ Complete! ✅ │' (length: 15)
  Grid line 2: '└──────────────┘' (length: 16)
    Char 6: '─' (Unicode: \u{2500})
    Char 7: '─' (Unicode: \u{2500})
    Char 8: '─' (Unicode: \u{2500})
    Char 9: '─' (Unicode: \u{2500})
    Char 10: '─' (Unicode: \u{2500})
    Char 11: '─' (Unicode: \u{2500})
    Char 12: '─' (Unicode: \u{2500})
    Char 13: '─' (Unicode: \u{2500})
    Char 14: '─' (Unicode: \u{2500})
    Char 15: '─' (Unicode: \u{2500})
    Char 16: '─' (Unicode: \u{2500})
    Char 17: '─' (Unicode: \u{2500})
    Char 18: '─' (Unicode: \u{2500})
    Char 19: '┐' (Unicode: \u{2510})
  Line 1: '│ [1;34mLoading.[0m         │' (length: 31)
    Char 0: '│' (Unicode: \u{2502})
    Char 1: ' ' (Unicode: \u{20})
    Char 2: '' (Unicode: \u{1b})
    Char 3: '[' (Unicode: \u{5b})
    Char 4: '1' (Unicode: \u{31})
    Char 5: ';' (Unicode: \u{3b})
    Char 6: '3' (Unicode: \u{33})
    Char 7: '4' (Unicode: \u{34})
    Char 8: 'm' (Unicode: \u{6d})
    Char 9: 'L' (Unicode: \u{4c})
    Char 10: 'o' (Unicode: \u{6f})
    Char 11: 'a' (Unicode: \u{61})
    Char 12: 'd' (Unicode: \u{64})
    Char 13: 'i' (Unicode: \u{69})
    Char 14: 'n' (Unicode: \u{6e})
    Char 15: 'g' (Unicode: \u{67})
    Char 16: '.' (Unicode: \u{2e})
    Char 17: '' (Unicode: \u{1b})
◇ Test "Finish render records duration and adds to history" started.
◇ Test "Average performance with insufficient history" started.
◇ Test "Tab advances focus via useFocusManager hook" started.
    Char 18: '[' (Unicode: \u{5b})
    Char 19: '0' (Unicode: \u{30})
    Char 20: 'm' (Unicode: \u{6d})
    Char 21: ' ' (Unicode: \u{20})
    Char 22: ' ' (Unicode: \u{20})
    Char 23: ' ' (Unicode: \u{20})
    Char 24: ' ' (Unicode: \u{20})
    Char 25: ' ' (Unicode: \u{20})
    Char 26: ' ' (Unicode: \u{20})
    Char 27: ' ' (Unicode: \u{20})
    Char 28: ' ' (Unicode: \u{20})
    Char 29: ' ' (Unicode: \u{20})
    Char 30: '│' (Unicode: \u{2502})
  Line 2: '└──────────────────┘' (length: 20)
    Char 0: '└' (Unicode: \u{2514})
    Char 1: '─' (Unicode: \u{2500})
    Char 2: '─' (Unicode: \u{2500})
    Char 3: '─' (Unicode: \u{2500})
    Char 4: '─' (Unicode: \u{2500})
    Char 5: '─' (Unicode: \u{2500})
Emoji line analysis:
  Original: '│ Complete! ✅ │'
  Characters:
    [0] '│' -> width: 1, scalars: [9474]
    [1] ' ' -> width: 1, scalars: [32]
    Char 6: '─' (Unicode: \u{2500})
    Char 7: '─' (Unicode: \u{2500})
    Char 8: '─' (Unicode: \u{2500})
    Char 9: '─' (Unicode: \u{2500})
    Char 10: '─' (Unicode: \u{2500})
    Char 11: '─' (Unicode: \u{2500})
    Char 12: '─' (Unicode: \u{2500})
    Char 13: '─' (Unicode: \u{2500})
    Char 14: '─' (Unicode: \u{2500})
    Char 15: '─' (Unicode: \u{2500})
    Char 16: '─' (Unicode: \u{2500})
    Char 17: '─' (Unicode: \u{2500})
    Char 18: '─' (Unicode: \u{2500})
    [2] 'C' -> width: 1, scalars: [67]
    Char 19: '┘' (Unicode: \u{2518})
    [3] 'o' -> width: 1, scalars: [111]
    [4] 'm' -> width: 1, scalars: [109]
    [5] 'p' -> width: 1, scalars: [112]
[?25l    [6] 'l' -> width: 1, scalars: [108]
[2J[H[0m[1;1H[2K│ [1mBold[0m │[0m    [7] 'e' -> width: 1, scalars: [101]
[2;1H[?25h[?25l    [8] 't' -> width: 1, scalars: [116]
[2;1H[?25h    [9] 'e' -> width: 1, scalars: [101]
    [10] '!' -> width: 1, scalars: [33]
    [11] ' ' -> width: 1, scalars: [32]
    [12] '✅' -> width: 2, scalars: [9989]
    [13] ' ' -> width: 1, scalars: [32]
    [14] '│' -> width: 1, scalars: [9474]
Text component with 12-column constraint:
  Text line 0: 'Complete! ✅' (length: 11, display width: 12)
Box with multiple children output:
Line 0: '┌──────────┐'
Line 1: '│  Line 1  │'
Line 2: '│  Line 2  │'
Line 3: '│  Line 3  │'
Line 4: '│          │'
Line 5: '│          │'
Line 6: '└──────────┘'
Content line: '│👨‍👩‍👧‍👦│' (count: 3)
Content line characters:
  [0]: '│' (scalars: [9474])
  [1]: '👨‍👩‍👧‍👦' (scalars: [128104, 8205, 128105, 8205, 128103, 8205, 128102])
  [2]: '│' (scalars: [9474])
Content without borders: '👨‍👩‍👧‍👦' (count: 1)
Content without borders characters:
  [0]: '👨‍👩‍👧‍👦' (scalars: [128104, 8205, 128105, 8205, 128103, 8205, 128102])
Expected emoji: '👨‍👩‍👧‍👦' (scalars: [128104, 8205, 128105, 8205, 128103, 8205, 128102])
Content contains full emoji: true
Content equals full emoji: true

DEBUG: Line analysis
  Line 0: '┌──────────────────────────────────────────────────────────────────────────────────────────────────┐' (length: 100, display width: 100)
  Line 1: '│                                                                                                  │' (length: 100, display width: 100)
  Line 2: '│  [1;36m🎯 Welcome to RuneKit![0m                                                                          │' (length: 110, display width: 100)
    Expected display width: 28
System monitor box output:
Line 0: '┌────────────────────────────┐'
Line 1: '│  System Monitor            │'
Line 2: '│  CPU: [████████░░] 80%     │'
Line 3: '│  RAM: [██████░░░░] 60%     │'
Line 4: '│  DISK: [███░░░░░░░] 30%    │'
Line 5: '│  NET: [██████████] 100%    │'
Line 6: '│                            │'
Line 7: '└────────────────────────────┘'
    Actual display width: 100
    Wide width: 100
    Difference from expected: 72
    Difference from wide: 0
    Ends with border: true
    Last character: '│'
    Character analysis:
      [0]: '│' (width: 1)
      [1]: ' ' (width: 1)
      [2]: ' ' (width: 1)
      [3]: '' (width: 0)
      [4]: '[' (width: 1)
      [5]: '1' (width: 1)
      [6]: ';' (width: 1)
      [7]: '3' (width: 1)
      [8]: '6' (width: 1)
      [9]: 'm' (width: 1)
      [10]: '🎯' (width: 2)
      [11]: ' ' (width: 1)
      [12]: 'W' (width: 1)
      [13]: 'e' (width: 1)
      [14]: 'l' (width: 1)
      [15]: 'c' (width: 1)
      [16]: 'o' (width: 1)
      [17]: 'm' (width: 1)
      [18]: 'e' (width: 1)
      [19]: ' ' (width: 1)
      [20]: 't' (width: 1)
      [21]: 'o' (width: 1)
      [22]: ' ' (width: 1)
      [23]: 'R' (width: 1)
      [24]: 'u' (width: 1)
      [25]: 'n' (width: 1)
      [26]: 'e' (width: 1)
      [27]: 'K' (width: 1)
      [28]: 'i' (width: 1)
      [29]: 't' (width: 1)
      [30]: '!' (width: 1)
      [31]: '' (width: 0)
      [32]: '[' (width: 1)
      [33]: '0' (width: 1)
      [34]: 'm' (width: 1)
      [35]: ' ' (width: 1)
      [36]: ' ' (width: 1)
      [37]: ' ' (width: 1)
      [38]: ' ' (width: 1)
      [39]: ' ' (width: 1)
      [40]: ' ' (width: 1)
      [41]: ' ' (width: 1)
      [42]: ' ' (width: 1)
      [43]: ' ' (width: 1)
      [44]: ' ' (width: 1)
      [45]: ' ' (width: 1)
      [46]: ' ' (width: 1)
      [47]: ' ' (width: 1)
      [48]: ' ' (width: 1)
      [49]: ' ' (width: 1)
      [50]: ' ' (width: 1)
      [51]: ' ' (width: 1)
      [52]: ' ' (width: 1)
      [53]: ' ' (width: 1)
      [54]: ' ' (width: 1)
      [55]: ' ' (width: 1)
      [56]: ' ' (width: 1)
      [57]: ' ' (width: 1)
      [58]: ' ' (width: 1)
      [59]: ' ' (width: 1)
      [60]: ' ' (width: 1)
      [61]: ' ' (width: 1)
      [62]: ' ' (width: 1)
      [63]: ' ' (width: 1)
      [64]: ' ' (width: 1)
      [65]: ' ' (width: 1)
      [66]: ' ' (width: 1)
      [67]: ' ' (width: 1)
      [68]: ' ' (width: 1)
      [69]: ' ' (width: 1)
      [70]: ' ' (width: 1)
      [71]: ' ' (width: 1)
      [72]: ' ' (width: 1)
      [73]: ' ' (width: 1)
      [74]: ' ' (width: 1)
      [75]: ' ' (width: 1)
      [76]: ' ' (width: 1)
      [77]: ' ' (width: 1)
      [78]: ' ' (width: 1)
      [79]: ' ' (width: 1)
      [80]: ' ' (width: 1)
      [81]: ' ' (width: 1)
      [82]: ' ' (width: 1)
      [83]: ' ' (width: 1)
      [84]: ' ' (width: 1)
      [85]: ' ' (width: 1)
      [86]: ' ' (width: 1)
      [87]: ' ' (width: 1)
      [88]: ' ' (width: 1)
      [89]: ' ' (width: 1)
      [90]: ' ' (width: 1)
[?25l[?25l✔ Test "exit(error:) uses provided custom exit code when error conforms" passed after 0.100 seconds.
✔ Test "exit(nil) yields code 0 (success)" passed after 0.100 seconds.
[?25l✔ Test "helper returns 0 when app exits with nil error" passed after 0.098 seconds.
[?25l✔ Test "runAppAndReturnExitCode returns the app's exit code" passed after 0.098 seconds.
[?25l✔ Test "useApp().exit() triggers unmount and resolves waitUntilExit" passed after 0.097 seconds.
[?25l✔ Test "exit(error:) uses default code 1 for plain errors" passed after 0.101 seconds.
[?25l[?25l[?25l✔ Test "Integration: RenderHandle unmount cleans up input manager and paste mode" passed after 0.096 seconds.
[?25l✔ Suite "RUNE-39+: App exit code propagation via useApp().exit(error:)" passed after 0.104 seconds.
✔ Suite "RuneCLI exit helper" passed after 0.104 seconds.
✔ Suite InputManagerTests passed after 0.104 seconds.
[?25l✔ Test "useApp().clear() stops console capture but keeps handle active" passed after 0.098 seconds.
✔ Suite "RUNE-39: useApp() context" passed after 0.104 seconds.
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K                                                                                [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2KCount: 0                                                                        [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h✔ Test "Frame rate limiting allows frames when under limit" passed after 0.100 seconds.
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K                                                                                [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h✔ Test "Hooks surface configured custom streams" passed after 0.101 seconds.
[?25l[?25l[?25l✔ Test "Default environment streams are exposed with metadata" passed after 0.101 seconds.
[?25l[?25l✔ Test "No-focusables broadcast remains unaffected by manager" passed after 0.100 seconds.
[?25l✔ Suite "RUNE-40: useStdin/Stdout/Stderr hooks" passed after 0.107 seconds.
[?25l[25;1H[?25h[25;1H[?25h[25;1H[?25h[25;1H[?25h[25;1H[?25h[?25l[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2KTop                                                                             [0m[2;1H[2K                                                                                [0m[3;1H[2KBottom                                                                          [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[25;1H[?25h[25;1H[?25h✔ Test "Box works with render() function and RenderHandle" passed after 0.100 seconds.
✔ Test "Signed zeroes: 0.0 and -0.0 are distinct and trigger reruns" passed after 0.104 seconds.
✔ Test "useRef identity persists across rerenders and does not trigger rerender on mutation" passed after 0.104 seconds.
✔ Suite "RUNE-27 integration tests" passed after 0.108 seconds.
[?25lAll lines changing benchmark:
  Line-diff: 9801 bytes, 83.61ms
  Full redraw: 10445 bytes, 7.72ms
  Efficiency: 0.0%
[?25l[?25l[25;1H[?25h✔ Test "Benchmark: All lines changing favors full redraw" passed after 0.101 seconds.
[?25l[25;1H[?25h[?25l[?25l[25;1H[?25h[25;1H[?25h[25;1H[?25h✔ Test "useMemo recomputes only when deps change" passed after 0.105 seconds.
✔ Test "Identity wrapper opts into object-identity dep semantics" passed after 0.105 seconds.
✔ Test "Custom Hashable with changing description triggers deps change" passed after 0.105 seconds.
[?25l[?25l[25;1H[?25h[25;1H[?25h✔ Test "Double.nan encodes to a stable deps token across commits" passed after 0.105 seconds.
✔ Suite "Hooks deps equality edge cases" passed after 0.109 seconds.
✔ Test "Block policy flushes immediately and clears buffer for oversized data" passed after 0.103 seconds.
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2KCount: 0                                                                        [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h✔ Suite "Output writer blocking behavior" passed after 0.109 seconds.
✔ Test "State preserves across rerenders with stable identity" passed after 0.103 seconds.
✔ Suite ViewStatePreservationTests passed after 0.109 seconds.
[?25l[25;1H[?25h✔ Test "Concurrent clear/rerender/unmount is safe" passed after 0.104 seconds.
✔ Suite RenderHandleConcurrencyStressTests passed after 0.110 seconds.
[?25l[25;1H[?25h✔ Test "useEffect deps sugar: nil runs every commit, [] mount-only, values trigger rerun" passed after 0.106 seconds.
✔ Suite "Hooks additional tests: deps sugar, useRef, useMemo" passed after 0.111 seconds.
[?25l[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K┌──────────────────────────────────────────────────────────────────────────────┐[0m[2;1H[2K│[37m[1mAlt Screen Demo[39m[0m                                                               │[0m[3;1H[2K│                                                                              │[0m[4;1H[2K│                                                                              │[0m[5;1H[2K│                                                                              │[0m[6;1H[2K│                                                                              │[0m[7;1H[2K│                                                                              │[0m[8;1H[2K│                                                                              │[0m[9;1H[2K│                                                                              │[0m[10;1H[2K│                                                                              │[0m[11;1H[2K│                                                                              │[0m[12;1H[2K│                                                                              │[0m[13;1H[2K│                                                                              │[0m[14;1H[2K│                                                                              │[0m[15;1H[2K│                                                                              │[0m[16;1H[2K│                                                                              │[0m[17;1H[2K│                                                                              │[0m[18;1H[2K│                                                                              │[0m[19;1H[2K│                                                                              │[0m[20;1H[2K│                                                                              │[0m[21;1H[2K│                                                                              │[0m[22;1H[2K│                                                                              │[0m[23;1H[2K│                                                                              │[0m[24;1H[2K└──────────────────────────────────────────────────────────────────────────────┘[0m[25;1H[?25h✔ Test "Debounced resize burst triggers a single rerender" passed after 0.109 seconds.
No changes benchmark:
Single line changes benchmark:
  Line-diff: 2092 bytes, 89.17ms
  Line-diff: 2966 bytes, 89.30ms
  Full redraw: 21100 bytes, 12.54ms
  Bytes saved: 19008
  Full redraw: 21100 bytes, 12.54ms
  Bytes saved: 18134
  Efficiency: 85.5%
  Efficiency: 90.0%
✔ Test "Benchmark: Single line changes favor line-diff" passed after 0.112 seconds.
✔ Test "Benchmark: No changes favor line-diff" passed after 0.112 seconds.
✔ Test "Resize during render does not crash and yields a single repaint per burst" passed after 0.113 seconds.
✔ Test "In-place repaint without flicker" passed after 0.108 seconds.
✔ Test "Frame buffer handles frame height shrinkage" passed after 0.114 seconds.
✔ Test "Frame height shrinkage cleanup" passed after 0.109 seconds.
✔ Suite AlternateScreenBufferTests passed after 0.121 seconds.
Automatic mode benchmark:
  Automatic: 13040 bytes, 90.47ms
  Full redraw: 21100 bytes, 13.64ms
  Bytes saved: 8060
  Efficiency: 38.0%
✔ Test "Benchmark: Automatic mode makes good decisions" passed after 0.115 seconds.
✔ Suite "Line diff benchmark tests" passed after 0.122 seconds.
[?25l[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K                                                                                [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h✔ Test "Composite view body is converted to Box/Text and renders border glyphs" passed after 0.119 seconds.
✔ Suite "Composite View resolution renders child components (no placeholders)" passed after 0.126 seconds.
✔ Test "Meta: ESC-prefixed ASCII letter is delivered" passed after 0.129 seconds.
✔ Test "When no focusables are registered, useInput remains broadcast to all active handlers (back-compat)" passed after 0.131 seconds.
✔ Test "Two distinct bursts cause two rerenders" passed after 0.129 seconds.
✔ Suite "Resize handling tests" passed after 0.136 seconds.
✔ Test "Multiple frame renders maintain state" passed after 0.136 seconds.
✔ Suite "Frame buffer integration tests" passed after 0.143 seconds.
✔ Test "Unsubscribe on unmount; no leaks" passed after 0.141 seconds.
[?25l[1S[24;1H                                                                                [25;1H[?25h✔ Test "Hook receives arrow/function/ctrl/meta keys" passed after 0.151 seconds.
✔ Test "F1-F4 (SS3), F6-F12 (CSI), Home/End/Page with modifiers, Shift+Ctrl" passed after 0.153 seconds.
✔ Suite "RUNE-38: useInput matrix" passed after 0.157 seconds.
✔ Test "Global input handlers receive events regardless of focus; others are gated" passed after 0.163 seconds.
✔ Test "Direct focus by id/path works" passed after 0.159 seconds.
✔ Test "Tab advances focus via useFocusManager hook" passed after 0.153 seconds.
✔ Suite "RUNE-41: useFocusManager hook integration" passed after 0.167 seconds.
✔ Test "isActive gates handler" passed after 0.162 seconds.
✔ Suite "RUNE-38: useInput hook" passed after 0.168 seconds.
✔ Test "Tab cycles focus among focusable elements and gates input to focused one" passed after 0.195 seconds.
✔ Suite "RUNE-41: Focus registry + useFocus/useFocusManager" passed after 0.199 seconds.
✔ Test "Frame rate limiting drops frames when appropriate" passed after 0.222 seconds.
✔ Suite LineDiffPerformanceTests passed after 0.229 seconds.
✔ Test "Programmatic next/previous cycles focus and gates input" passed after 0.241 seconds.
✔ Suite "RUNE-41: useFocusManager hook" passed after 0.249 seconds.
Performance benchmark: 7000 width calculations in 0.277 seconds
✔ Test "Performance benchmark for common strings" passed after 0.284 seconds.
✔ Suite WidthPerformanceTests passed after 0.286 seconds.
✔ Test run with 609 tests passed after 0.287 seconds.
