Building for debugging...
[0/4] Write swift-version--58304C5D6DBC2206.txt
Build complete! (0.14s)
◇ Test run started.
↳ Testing Library Version: 124.4
↳ Target Platform: arm64e-apple-macos14.0
✘ Suite "Concurrency and integration tests" skipped: "Timing-sensitive tests that can hang"
◇ Suite "Render handle control tests" started.
◇ Suite "RuneCLI exit helper" started.
◇ Suite RenderOptionsTests started.
◇ Suite SignalHandlerTests started.
◇ Suite "RUNE-39+: App exit code propagation via useApp().exit(error:)" started.
◇ Suite "RUNE-41: useFocusManager hook integration" started.
◇ Suite ViewStatePreservationTests started.
◇ Suite "RUNE-38: useInput hook" started.
◇ Suite "Resize handling tests" started.
◇ Suite "RUNE-27 integration tests" started.
◇ Suite "Yoga Integration Tests" started.
◇ Suite "RUNE-40: useStdin/Stdout/Stderr hooks" started.
◇ Suite FlexAdvancedLayoutTests started.
◇ Suite "Hooks deps equality edge cases" started.
◇ Suite "RUNE-39: useApp() context" started.
◇ Suite "Render function tests" started.
◇ Suite SGRStateMachineTests started.
◇ Suite BoxLayoutTests started.
◇ Suite SGRMicroOptimizationsTests started.
◇ Suite ANSIConversionTests started.
◇ Suite FlexLayoutSnapshotTests started.
◇ Suite AdvancedInputDecodingTests started.
◇ Suite InputManagerTests started.
◇ Suite ANSIAwareWrapSliceTests started.
◇ Suite WrapEmojiClippingE2ETests started.
✘ Suite "Ticker tests" skipped: "Timing-sensitive test that can hang"
◇ Suite TextColorBleedTests started.
◇ Suite "Composite View resolution renders child components (no placeholders)" started.
◇ Suite FlexLayoutTests started.
◇ Suite RuneCLISmokeTests started.
◇ Suite SGRAttributeToggleTests started.
◇ Suite "RUNE-41: Focus registry + useFocus/useFocusManager" started.
◇ Suite RenderHandleConcurrencyStressTests started.
◇ Suite YogaRawValueValidationTests started.
◇ Suite "Hooks additional tests: deps sugar, useRef, useMemo" started.
◇ Suite "Render handle rerender tests" started.
◇ Suite "RUNE-38: useInput matrix" started.
◇ Suite "RUNE-41: useFocusManager hook" started.
◇ Suite StyledTextOperationsTests started.
◇ Suite TextSpanTests started.
◇ Suite ChildIdentityReconcilerTests started.
◇ Suite WidthBasicTests started.
◇ Suite "Hooks runtime tests for RUNE-37" started.
◇ Suite BoxFlexLayoutIntegrationTests started.
◇ Suite AlignmentSnapshotTests started.
◇ Suite WidthPerformanceTests started.
◇ Suite ANSITokenizerSGRTests started.
◇ Suite TerminalProfileTests started.
◇ Suite UnicodeCategoriesBasicTests started.
◇ Suite ANSITokenizerControlTests started.
◇ Suite UnicodeCategoriesEnumTests started.
◇ Suite TextStyleParityTests started.
◇ Suite StyledTextExampleTests started.
◇ Suite SGRDiffingV2Tests started.
◇ Suite ComponentTests started.
◇ Suite TextErgonomicsTests started.
◇ Suite WidthEastAsianTests started.
◇ Suite TextWrappingSnapshotTests started.
◇ Suite ANSITokenizerBasicTests started.
◇ Suite InvalidColorAndInverseTests started.
◇ Suite ExtendedPictographicScalarTests started.
◇ Suite WidthWcwidthTests started.
◇ Suite SpacerCrossAxisTests started.
◇ Suite TextModifiersTests started.
◇ Suite SGRDiffingTests started.
◇ Suite LineComposerGoldenZWJTests started.
◇ Suite "Transform time-aware initializer tests" started.
◇ Suite BoxBorderBackgroundANSITests started.
◇ Suite UnicodeCategoriesNormalizationTests started.
◇ Suite RuneKitTests started.
◇ Suite TextWrappingTests started.
◇ Suite AlignmentWrapMatrixTests started.
◇ Suite "Line diff benchmark tests" started.
◇ Suite PerformanceTimingExposureTests started.
◇ Suite CursorPolicyTests started.
◇ Suite WidthGoldenTests started.
◇ Suite TextStyleMatrixTests started.
◇ Suite LineComposerTests started.
◇ Suite ScrollOptimizationTests started.
◇ Suite TextStyleTypeTests started.
◇ Suite RenderConfigurationTests started.
◇ Suite TextAttributesTests started.
◇ Suite LogLaneTests started.
◇ Suite "Output writer tests" started.
◇ Suite AlternateScreenBufferTests started.
◇ Suite HybridReconcilerPolicyTests started.
◇ Suite UnicodeCategoriesEdgeCasesTests started.
◇ Suite ScrollOptimizationNShiftTests started.
◇ Suite TextStyleSnapshotTests started.
◇ Suite LogLaneANSIWIdeWrapTests started.
◇ Suite PerformanceMetricsTests started.
◇ Suite HybridDifferInjectionTests started.
◇ Suite ConsoleCaptureTests started.
◇ Suite TransformExactStringTests started.
◇ Suite StrategyDeterminerTests started.
◇ Suite "Output writer blocking behavior" started.
◇ Suite TerminalRendererTests started.
◇ Suite "Pluggable IO ordering tests" started.
◇ Suite CursorReturnPolicyTests started.
◇ Suite "Ink-style renderer behavior on main screen buffer" started.
◇ Suite TransformANSISafetyTests started.
◇ Suite "Frame buffer integration tests" started.
◇ Suite "Output serialization integration" started.
◇ Suite "Output abstractions tests" started.
◇ Suite "Alt-screen ordering boundaries" started.
◇ Suite LineDiffPerformanceTests started.
◇ Test "Truncate appends reset and prevents style bleed" started.
◇ Suite AlternateScreenBufferIntegrationTests started.
◇ Suite LineDiffTests started.
◇ Suite "Line diff frame buffer tests" started.
◇ Suite "PTY integration tests" started.
◇ Suite TerminalGridANSIAwareTests started.
◇ Suite AutowrapGuardTests started.
✘ Test "clear() clears screen content" skipped: "Disabled to prevent CI hanging on pipe reads"
◇ Test "runAppAndReturnExitCode returns the app's exit code" started.
◇ Test "clear() is safe to call multiple times" started.
◇ Test "waitUntilExit() resolves immediately if already unmounted" started.
◇ Test "waitUntilExit() resolves when unmount() is called" started.
◇ Test "unmount() is idempotent - multiple calls are safe" started.
◇ Test "helper returns 0 when app exits with nil error" started.
◇ Test "unmount() tears down resources and makes handle inactive" started.
◇ Test "SignalHandler graceful teardown callback" started.
✘ Test "clear() with alternate screen clears properly" skipped: "Disabled to prevent CI hanging on pipe reads"
◇ Test "SignalHandler initialization" started.
✘ Test "Integration test: Terminal size detection" skipped: "Timing-sensitive tests that can hang"
✘ Test "Integration test: Signal handler properly calls unmount" skipped: "Timing-sensitive tests that can hang"
◇ Test "RenderOptions TTY detection" started.
✘ Test "Concurrency safety: multiple simultaneous operations" skipped: "Timing-sensitive tests that can hang"
◇ Test "SignalHandler install and cleanup" started.
◇ Test "RenderOptions initialization with custom values" started.
◇ Test "Tab advances focus via useFocusManager hook" started.
◇ Test "RenderOptions CI environment heuristics" started.
✘ Test "Integration test: View to Component conversion" skipped: "Timing-sensitive tests that can hang"
✘ Test "Concurrency safety: multiple waitUntilExit calls" skipped: "Timing-sensitive tests that can hang"
◇ Test "exit(nil) yields code 0 (success)" started.
◇ Test "exit(error:) uses default code 1 for plain errors" started.
◇ Test "exit(error:) uses provided custom exit code when error conforms" started.
✘ Test "Concurrency safety: unmount during other operations" skipped: "Timing-sensitive tests that can hang"
◇ Test "RenderOptions initialization with defaults" started.
◇ Test "Meta: ESC-prefixed ASCII letter is delivered" started.
◇ Test "State preserves across rerenders with stable identity" started.
◇ Test "isActive gates handler" started.
◇ Test "Hook receives arrow/function/ctrl/meta keys" started.
◇ Test "Resize during render does not crash and yields a single repaint per burst" started.
◇ Test "Debounced resize burst triggers a single rerender" started.
◇ Test "Hooks surface configured custom streams" started.
◇ Test "Box renders different border styles correctly" started.
◇ Test "Basic column layout calculation" started.
✘ Test "Integration test: Complete render handle lifecycle" skipped: "Timing-sensitive tests that can hang"
◇ Test "Default environment streams are exposed with metadata" started.
◇ Test "Two distinct bursts cause two rerenders" started.
◇ Test "Unsubscribe on unmount; no leaks" started.
◇ Test "Box integrates with View protocol and render pipeline" started.
◇ Test "Padding affects child positioning" started.
◇ Test "Layout calculation with zero dimensions" started.
◇ Test "Box renders borders correctly with proper layout" started.
◇ Test "Box layout integrates with FlexLayout coordinate system" started.
◇ Test "FlexLayout uses Yoga backend correctly" started.
◇ Test "Align self center overrides parent align items" started.
◇ Test "FlexLayout handles empty children" started.
◇ Test "Box works with render() function and RenderHandle" started.
◇ Test "Align items center works correctly" started.
◇ Test "Justify content space between works correctly" started.
◇ Test "Box layout works consistently across platforms" started.
◇ Test "Yoga node creation and cleanup" started.
◇ Test "Max width constraint prevents growing beyond maximum" started.
◇ Test "Signed zeroes: 0.0 and -0.0 are distinct and trigger reruns" started.
◇ Test "Double.nan encodes to a stable deps token across commits" started.
◇ Test "Box layout maintains performance with complex hierarchies" started.
◇ Test "Yoga layout engine singleton" started.
◇ Test "Min and max height constraints work in column direction" started.
◇ Test "Box integrates with existing Component system" started.
◇ Test "Basic row layout calculation" started.
◇ Test "Multiple layout calculations don't leak memory" started.
◇ Test "Box integrates with FrameBuffer rendering" started.
◇ Test "RenderHandle initialization and basic functionality" started.
◇ Test "Overflow is clipped at wrap boundaries" started.
◇ Test "Min width constraint prevents shrinking below minimum" started.
◇ Test "Float to terminal coordinate conversion" started.
◇ Test "Custom Hashable with changing description triggers deps change" started.
◇ Test "useApp().clear() stops console capture but keeps handle active" started.
◇ Test "useApp().exit() triggers unmount and resolves waitUntilExit" started.
◇ Test "Flex wrap creates new line when content overflows" started.
◇ Test "RenderHandle with signal handler" started.
◇ Test "Flex wrap respects emoji-safe width boundaries" started.
◇ Test "Reset clears all attributes" started.
◇ Test "RenderHandle with console capture" started.
◇ Test "Vertical overflow is clipped in wrapped layout" started.
✘ Test "Integration test: render function with mock view" skipped: "Disabled to prevent CI interference"
◇ Test "Convert mixed tokens with non-SGR sequences" started.
◇ Test "Flex basis sets initial size before grow/shrink" started.
◇ Test "Justify content and align items with padding" started.
◇ Test "Edge case: Padding larger than container" started.
◇ Test "Basic style enable/disable and colors" started.
◇ Test "Complex nested layout with mixed properties" started.
◇ Test "Rounding rules for fractional coordinates" started.
◇ Test "Identity wrapper opts into object-identity dep semantics" started.
◇ Test "Convert multiple spans to tokens" started.
◇ Test "Convert empty styled text to tokens" started.
◇ Test "Row layout with nested column layouts" started.
◇ Test "Justify content center works correctly" started.
◇ Test "Flex shrink reduces size proportionally when space is insufficient" started.
◇ Test "Convert plain text spans to tokens" started.
◇ Test "Convert RGB color spans to tokens" started.
◇ Test "Margin affects element positioning" started.
◇ Test "Box works with HybridReconciler optimization strategies" started.
◇ Test "Convert simple SGR tokens to spans" started.
◇ Test "Convert multiple SGR tokens to spans" started.
◇ Test "Convert empty token array" started.
◇ Test "Avoid final reset if already reset when transitioning to default" started.
◇ Test "Convert 256-color tokens to spans" started.
◇ Test "Convert RGB color tokens to spans" started.
◇ Test "Bracketed paste with UTF-8 payload (emoji)" started.
◇ Test "Flex grow distributes extra space proportionally" started.
◇ Test "Snapshot: Responsive card grid with wrapping" started.
◇ Test "Combined SGR emitted once, avoid resets between non-default spans" started.
◇ Test "Integration: RenderHandle unmount cleans up input manager and paste mode" started.
◇ Test "Chunked ESC sequence is decoded when complete" started.
◇ Test "Snapshot: Constrained layout with min/max bounds" started.
◇ Test "Nested boxes with padding and margin" started.
◇ Test "Ctrl-C triggers unmount when exitOnCtrlC=true via InputManager path" started.
◇ Test "Convert tokens with only SGR (no text)" started.
◇ Test "Convert plain text tokens to spans" started.
◇ Test "Edge case: Zero dimensions" started.
◇ Test "Slice mixed content preserving grapheme clusters" started.
◇ Test "Convert styled spans to tokens" started.
◇ Test "Convert 256-color spans to tokens" started.
◇ Test "Snapshot: Emoji-safe terminal layout" started.
◇ Test "256 and RGB colors" started.
◇ Test "Complex SGR sequence preservation across splits" started.
◇ Test "Decodes modifiers for arrow keys (Ctrl)" started.
◇ Test "Decodes CSI function keys F5-F12 and PageUp/Down" started.
◇ Test "Wrap and clip emoji with borders without exceeding width" started.
◇ Test "Snapshot: Complex dashboard layout with flex grow/shrink" started.
◇ Test "RUNE-19 Acceptance Criteria: ANSI-aware wrap & slice comprehensive test" started.
◇ Test "Split styled text by display width with CJK characters" started.
◇ Test "Composite view body is converted to Box/Text and renders border glyphs" started.
◇ Test "Last column guard prevents wide character overflow" started.
◇ Test "Wrap mixed ANSI styled text with emoji and CJK characters" started.
◇ Test "Slice styled text by display columns" started.
✘ Test "Ticker ticks and cancellation stops future ticks (robust)" skipped: "Timing-sensitive test that can hang"
◇ Test "Bracketed paste emits single paste event when enabled" started.
◇ Test "Handle malformed SGR parameters gracefully" started.
◇ Test "Empty children array returns empty rects" started.
◇ Test "Split styled text by display width preserving grapheme clusters" started.
◇ Test "Wrap styled text preserving ANSI formatting" started.
◇ Test "Box with margin affects positioning" started.
◇ Test "No color bleed across lines" started.
◇ Test "Decodes arrows and Ctrl-C/ Ctrl-D bytes" started.
◇ Test "Prevent color bleed across wrapped lines" started.
◇ Test "Single child layout" started.
◇ Test "Decodes SS3 arrows and F1-F4" started.
◇ Test "Split styled text with grapheme cluster boundary protection" started.
◇ Test "Multiple children in column direction" started.
◇ Test "Multiple children in row direction" started.
◇ Test "Box row layout with column gap" started.
◇ Test "Color change does not emit unnecessary reset" started.
◇ Test "Concurrent clear/rerender/unmount is safe" started.
◇ Test "YogaWrapper mappings use expected raw values" started.
◇ Test "Handle empty text in display width operations" started.
✘ Test "RuneCLI exits promptly in test mode" skipped.
◇ Test "Rect equality" started.
◇ Test "Global input handlers receive events regardless of focus; others are gated" started.
◇ Test "Identity change resets diff state" started.
◇ Test "Size equality" started.
◇ Test "F1-F4 (SS3), F6-F12 (CSI), Home/End/Page with modifiers, Shift+Ctrl" started.
◇ Test "rerender() preserves state for same view identity" started.
◇ Test "When no focusables are registered, useInput remains broadcast to all active handlers (back-compat)" started.
◇ Test "Box column layout with row gap" started.
◇ Test "Split styled text with last column guard" started.
◇ Test "Tab cycles focus among focusable elements and gates input to focused one" started.
◇ Test "Style toggles maintain correctness with minimal emissions" started.
◇ Test "Box with padding produces correct layout" started.
◇ Test "Styled text plain text extraction" started.
◇ Test "useRef identity persists across rerenders and does not trigger rerender on mutation" started.
◇ Test "Round-trip conversion preserves complex styling" started.
◇ Test "rerender() handles view identity changes" started.
◇ Test "Styled text with single span" started.
◇ Test "No-focusables broadcast remains unaffected by manager" started.
◇ Test "Box with fixed dimensions" started.
◇ Test "useEffect deps sugar: nil runs every commit, [] mount-only, values trigger rerun" started.
◇ Test "Box with percentage dimensions" started.
◇ Test "Split at invalid indices" started.
◇ Test "Programmatic next/previous cycles focus and gates input" started.
◇ Test "Empty styled text" started.
◇ Test "rerender() is safe to call multiple times rapidly" started.
◇ Test "Round-trip conversion preserves 256-color" started.
◇ Test "Merge multiple adjacent compatible spans" started.
◇ Test "Split span by display width with CJK" started.
◇ Test "Split span with last column guard" started.
◇ Test "Split styled text at column boundary" started.
◇ Test "Round-trip conversion preserves RGB color" started.
◇ Test "Text span with plain text" started.
◇ Test "Text span equality" started.
◇ Test "useMemo recomputes only when deps change" started.
✘ Test "rerender() updates UI content" skipped: "Disabled to prevent CI hanging on pipe reads"
◇ Test "Large text performance" started.
◇ Test "Merge adjacent compatible spans" started.
◇ Test "Round-trip conversion preserves plain text" started.
◇ Test "Text span with styled attributes" started.
◇ Test "Split span at end" started.
◇ Test "Direct focus by id/path works" started.
◇ Test "Round-trip conversion preserves simple styling" started.
◇ Test "Handle empty spans in merge" started.
◇ Test "Split span at character boundary" started.
◇ Test "East Asian scalar width" started.
◇ Test "Empty string has zero width" started.
◇ Test "Control character scalar width" started.
◇ Test "Unicode text handling" started.
◇ Test "Preserve child state across reordering with stable identity" started.
◇ Test "Box layout API is consistent with FlexLayout patterns" started.
◇ Test "Styled text with multiple spans" started.
◇ Test "Grapheme cluster API for East Asian character" started.
◇ Test "ASCII characters have width 1" started.
◇ Test "Grapheme cluster API for combining character" started.
◇ Test "Space character width" started.
◇ Test "Box layout maintains FlexLayout immutability principles" started.
◇ Test "Split span at beginning" started.
✘ Test "Effect re-runs on deps change and previous cleanup executes" skipped: "Timing-sensitive test that can hang"
✘ Test "useEffect runs on mount and cleanup runs on unmount; requestRerender drives ~10-12 Hz" skipped: "Timing-sensitive test that can hang"
◇ Test "ASCII string with spaces" started.
◇ Test "Box layout integrates with Text component sizing" started.
◇ Test "Don't merge spans with different attributes" started.
◇ Test "Box layout works with nested Box components" started.
◇ Test "Null character width" started.
◇ Test "Box layout produces compatible rectangles with FlexLayout" started.
◇ Test "Performance benchmark: ASCII baseline" started.
◇ Test "JustifyContent options work correctly in row layout" started.
◇ Test "Split span by display width with emoji" started.
◇ Test "Multiple SGR parameters" started.
◇ Test "Box layout respects FlexLayout coordinate system" started.
◇ Test "Box layout handles FlexLayout.Rect edge cases" started.
◇ Test "Zero-width characters handling" started.
◇ Test "Spacer works correctly with different alignment combinations" started.
◇ Test "Box layout doesn't interfere with FlexLayout performance" started.
◇ Test "AlignItems options work correctly in row layout" started.
◇ Test "xterm256 maps RGB to 256" started.
◇ Test "Emoji scalar detection" started.
◇ Test "AlignSelf options work correctly and override parent alignItems" started.
◇ Test "ASCII scalar width" started.
◇ Test "Delete character width" started.
◇ Test "Combining mark detection" started.
◇ Test "Cursor right default 1 (CSI C with no param)" started.
◇ Test "Alignment works correctly with borders and padding" started.
◇ Test "basic16 maps RGB and 256 to 16-colors" started.
◇ Test "Number category detection" started.
◇ Test "noColor strips all color but keeps effects" started.
◇ Test "Performance benchmark: Enhanced width calculation" started.
◇ Test "Text supports combined styles including inverse and colors" started.
◇ Test "ASCII letter category detection" started.
◇ Test "Simple SGR color code" started.
◇ Test "FlexLayout.calculateLayout still works with existing API" started.
◇ Test "Unterminated OSC is treated as plain text (no .osc token)" started.
◇ Test "Hex color helpers parse and apply when valid, ignore when invalid" started.
◇ Test "Text ignores invalid color components when using RGB/256" started.
◇ Test "Newline component respects height constraint" started.
◇ Test "Symbol category detection" started.
◇ Test "Erase display all (CSI 2J)" started.
◇ Test "Box with border renders correctly" started.
◇ Test "Run basic conversion example" started.
◇ Test "Run complex colors example" started.
◇ Test "Static component View protocol conformance" started.
◇ Test "AlignSelf stretch makes child fill cross-axis" started.
◇ Test "Attribute-level diff emits reset when reverting to default and caches common attrs" started.
◇ Test "Run splitting text example" started.
◇ Test "Run merging spans example" started.
◇ Test "Box with minimum dimensions handles borders correctly" started.
◇ Test "Erase line to end (CSI K with default)" started.
◇ Test "Text component with RGB color" started.
◇ Test "Cursor up by 3 (CSI A)" started.
✘ Test "Japanese characters width" skipped: "Will be implemented in next iteration"
◇ Test "TrueColor preserves RGB and 256" started.
◇ Test "OSC window title with ST terminator parses and canonicalizes to BEL on encode" started.
◇ Test "Box with multiple Text children renders correctly" started.
◇ Test "Grapheme cluster API for simple ASCII" started.
◇ Test "Text component with CJK characters and styling" started.
◇ Test "Box border rendering with emoji content" started.
◇ Test "Newline component View protocol conformance" started.
◇ Test "OSC window title with BEL terminator round-trips identically" started.
◇ Test "Performance benchmark for common strings" started.
◇ Test "Box with text child" started.
◇ Test "Run all attributes example" started.
◇ Test "Conditional helpers apply only when condition is true" started.
◇ Test "Transform with Box preserves borders correctly" started.
◇ Test "Newline component with count 3 renders three newlines" started.
◇ Test "Empty string returns empty array" started.
◇ Test "Text component with simple content" started.
◇ Test "Plain text without ANSI codes" started.
◇ Test "Punctuation category detection" started.
◇ Test "Text component with strikethrough styling" started.
◇ Test "Box with rounded border renders correctly" started.
◇ Test "East Asian Width - Chinese ideographs" started.
◇ Test "Snapshot: wrap mixed styles + emoji/ZWJ/CJK" started.
◇ Test "East Asian Width - Japanese characters" started.
◇ Test "East Asian Width - Fullwidth characters" started.
◇ Test "Text component with emoji style combinations" started.
◇ Test "Transform handles emoji and Unicode correctly" started.
◇ Test "Text component RGB and 256 color snapshots" started.
◇ Test "Box with double border renders correctly" started.
◇ Test "Static component with width constraint" started.
◇ Test "Transform with nested styled components preserves all ANSI" started.
◇ Test "Newline component with large count respects height constraint" started.
◇ Test "Text component with zero dimensions" started.
◇ Test "East Asian Width - Halfwidth characters" started.
◇ Test "Static component with emoji width constraint" started.
✘ Test "Chinese characters width" skipped: "Will be implemented in next iteration"
◇ Test "Newline component with count 1 renders single newline" started.
◇ Test "Text component with width constraint and styling" started.
◇ Test "Box with CJK content handles width correctly" started.
◇ Test "Text component with bold styling" started.
◇ Test "Box with border and content renders correctly" started.
◇ Test "RUNE32 real-world layout patterns work correctly" started.
◇ Test "Newline component with zero height renders no lines" started.
◇ Test "Text component with no styling should not add ANSI codes" started.
◇ Test "Static component with multiple lines" started.
◇ Test "Text component with multiple styles" started.
◇ Test "Box with border style none" started.
◇ Test "Text component with italic styling" started.
◇ Test "Static component with empty lines" started.
◇ Test "RUNE27 demo Spacer examples work correctly" started.
◇ Test "AlignSelf center overrides parent alignItems" started.
◇ Test "Text component with dim styling" started.
◇ Test "Box with emoji content handles width correctly" started.
◇ Test "Text component with zero height" started.
◇ Test "Text component with content longer than width" started.
◇ Test "Box with single border renders correctly" started.
◇ Test "ANSI-aware display width calculation" started.
◇ Test "Spacer renders as empty content" started.
◇ Test "Text component with emoji and styling" started.
◇ Test "Spacer in column layout consumes remaining vertical space" started.
◇ Test "Text component with underline styling" started.
◇ Test "Box with system monitor style content renders correctly" started.
◇ Test "Box with too small dimensions gracefully degrades" started.
◇ Test "Box with Text child renders emoji correctly" started.
◇ Test "Text component with empty content has no color bleed" started.
◇ Test "Newline component with zero width renders correctly" started.
◇ Test "Text component with multiple lines prevents color bleed" started.
◇ Test "createBoxFrame with emoji renders borders correctly" started.
◇ Test "Newline component with negative count treats as zero" started.
◇ Test "Text component with color styling" started.
◇ Test "Invalid 256-color SGR parameter is ignored gracefully" started.
◇ Test "Text component prevents color bleed at line boundaries" started.
◇ Test "Text component with special characters and styling" started.
◇ Test "Static component ordering consistency" started.
◇ Test "Static component with CJK characters" started.
◇ Test "Box supports alignSelf property" started.
◇ Test "Text component with CJK style combinations" started.
◇ Test "Text component with empty content and styling" started.
◇ Test "Text component with inverse styling" started.
◇ Test "Text component with background color" started.
◇ Test "Generator omits SGR for invalid color values in attributes" started.
◇ Test "Transform applies simple string transformation" started.
◇ Test "Inverse with explicit fg and bg keeps both color codes" started.
◇ Test "Static component immutability" started.
◇ Test "Newline component exists and conforms to Component protocol" started.
◇ Test "Spacer in row layout consumes remaining horizontal space" started.
◇ Test "Newline component with count 0 renders no lines" started.
◇ Test "Text component reset code placement" started.
◇ Test "Transform component exists and conforms to Component protocol" started.
◇ Test "Box with border and padding renders correctly" started.
◇ Test "Invalid RGB SGR parameters are ignored gracefully" started.
◇ Test "Transform with empty child renders empty" started.
◇ Test "Static component with zero dimensions" started.
◇ Test "Multiple spacers divide remaining space equally" started.
◇ Test "Newline component produces no SGR leakage" started.
◇ Test "Box prevents emoji clipping at border edges" started.
◇ Test "Transform chains multiple transformations correctly" started.
◇ Test "Control characters have zero width" started.
◇ Test "String with combining marks" started.
◇ Test "Text component style combination snapshots" started.
◇ Test "Transform preserves ANSI sequences correctly" started.
◇ Test "Transform with zero dimensions returns empty" started.
◇ Test "Whitespace characters" started.
◇ Test "Spacer does not affect cross-axis sizing" started.
◇ Test "Basic EP boundary checks" started.
◇ Test "Static component with height constraint" started.
◇ Test "Transform handles complex ANSI sequences without breaking them" started.
◇ Test "AlignSelf enum exists with all required cases" started.
◇ Test "AlignSelf auto inherits from parent alignItems" started.
◇ Test "Static component with emoji content" started.
◇ Test "Basic Latin characters" started.
◇ Test "Box with zero dimensions" started.
✘ Test "Time-aware Transform produces different output over time" skipped: "Timing-sensitive test that can hang"
◇ Test "Combining marks have zero width" started.
◇ Test "Color override: last wins" started.
◇ Test "Wrap preserves ZWJ family across lines" started.
◇ Test "Chainable modifiers compose and render" started.
◇ Test "Borders get colored and background fills content area without bleed" started.
◇ Test "Spacer with no available space has zero size" started.
◇ Test "Empty text with styling renders empty line" started.
◇ Test "Unicode version information" started.
◇ Test "Static component with single line" started.
◇ Test "Benchmark: Single line changes favor line-diff" started.
◇ Test "Text component plain text has no ANSI codes" started.
◇ Test "Spacer component exists and conforms to Component protocol" started.
◇ Test "wrappedLines preserves ANSI and avoids bleed with emojis/ZWJ/CJK" started.
◇ Test "Split never breaks ZWJ family at boundary" started.
◇ Test "Spacer remains minimal on cross-axis under alignItems: .stretch" started.
◇ Test "Benchmark: Automatic mode makes good decisions" started.
◇ Test "Empty box component" started.
◇ Test "Unicode normalization NFD" started.
◇ Test "Generator avoids redundant SGR when attributes unchanged" started.
◇ Test "RuneKit module loads correctly" started.
◇ Test "Text component with zero width" started.
◇ Test "Golden test: Family emoji ZWJ sequence" started.
◇ Test "Unicode normalization NFC" started.
◇ Test "Text component with 256 color" started.
◇ Test "Multi-children ANSI/emoji placement uses display columns and no overlap" started.
◇ Test "Renderer respects hideCursorDuringRender=false" started.
◇ Test "Unicode normalization NFKC" started.
◇ Test "Benchmark: No changes favor line-diff" started.
◇ Test "Unicode normalization NFKD" started.
◇ Test "Time-aware Transform with constant transform behaves like normal Transform and preserves ANSI" started.
◇ Test "Golden test: Fullwidth comma" started.
◇ Test "Benchmark: All lines changing favors full redraw" started.
◇ Test "HybridReconciler exposes timing consistent with fpsCap" started.
✘ Test "Flag emoji width" skipped: "Will be implemented in next iteration"
◇ Test "Renderer respects hideCursorDuringRender=true (default)" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=invalid disables alternate screen" started.
◇ Test "Golden test: Chinese ideograph" started.
◇ Test "Golden test: Slightly smiling face emoji" started.
✘ Test "Simple emoji width" skipped: "Will be implemented in next iteration"
◇ Test "Wrap produces lines that rejoin to original ignoring resets" started.
◇ Test "High performance configuration has aggressive settings" started.
◇ Test "Split preserves SGR and grapheme boundaries" started.
◇ Test "Performance tuning accepts custom values" started.
◇ Test "Overlay last-wins and conversion to attributes" started.
✘ Test "Complex emoji width" skipped: "Will be implemented in next iteration"
◇ Test "Golden test: End-of-line scenarios" started.
◇ Test "Detect one-line downward scroll and emit scroll sequence" started.
◇ Test "Parametric matrix: alignItems × justifyContent × flexWrap × direction" started.
◇ Test "Environment variable RUNE_ALT_SCREEN not set uses default" started.
✘ Test "Mixed ASCII and emoji" skipped: "Will be implemented in next iteration"
◇ Test "Environment variable RUNE_DEBUG enables console capture" started.
◇ Test "Line diff mode respects efficiency threshold" started.
◇ Test "Environment configuration reads render mode" started.
◇ Test "Debug configuration enables extensive logging" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE case insensitive" started.
◇ Test "Text init with style renders correctly" started.
◇ Test "Common style combinations produce ANSI and reset" started.
◇ Test "Golden test: Japanese flag emoji" started.
◇ Test "Performance tuning has reasonable defaults" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE=0 disables console capture" started.
◇ Test "Golden test: Transgender flag emoji" started.
◇ Test "Default configuration has expected values" started.
◇ Test "Frame rate limiting works correctly" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=1 enables alternate screen" started.
◇ Test "Automatic mode makes intelligent decisions" started.
◇ Test "Complex attribute combinations" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=TRUE enables alternate screen" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE not set uses default" started.
◇ Test "Optimization mode raw values are correct" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=0 disables alternate screen" started.
◇ Test "256-color palette" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE=1 enables console capture" started.
◇ Test "Conservative configuration has safe settings" started.
◇ Test "Text attributes with color" started.
◇ Test "LogLane custom configuration" started.
◇ Test "Custom configuration accepts all parameters" started.
◇ Test "Text attributes equality" started.
◇ Test "LogLane predefined configurations" started.
◇ Test "Line diff mode respects frame size limits" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE=true enables console capture" started.
◇ Test "LogLane creates separator" started.
◇ Test "Full redraw mode always returns full redraw" started.
◇ Test "LogLane respects max display lines" started.
◇ Test "LogLane initialization" started.
◇ Test "Debug: FrameBuffer default behavior without alternate screen" started.
◇ Test "LogLane formats multiple logs" started.
◇ Test "Optimization mode enum has all expected cases" started.
◇ Test "Text attributes with bold styling" started.
◇ Test "LogLane includes timestamps when enabled" started.
◇ Test "Basic ANSI colors" started.
◇ Test "LogLane wraps long lines" started.
◇ Test "AlternateScreenBuffer double enter is safe" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=false disables alternate screen" started.
◇ Test "In-place repaint without flicker" started.
◇ Test "AlternateScreenBuffer leave sequence" started.
◇ Test "High frame rate allows more frequent updates" started.
◇ Test "Environment variable RUNE_ALT_SCREEN=true enables alternate screen" started.
◇ Test "Environment variable RUNE_CONSOLE_CAPTURE=false disables console capture" started.
◇ Test "LogLane formats stderr with different prefix" started.
◇ Test "RGB colors" started.
◇ Test "Control character detection" started.
◇ Test "Batched writes reduce syscalls vs unbatched" started.
◇ Test "LogLane calculates display height" started.
◇ Test "AlternateScreenBuffer double leave is safe" started.
◇ Test "Detect two-line downward scroll and emit ESC[2S and write 2 lines" started.
◇ Test "AlternateScreenBuffer with fallback enabled" started.
◇ Test "Detect two-line upward scroll and emit ESC[2T and write 2 lines at top" started.
◇ Test "LogLane formats single log line" started.
◇ Test "AlternateScreenBuffer enter sequence" started.
◇ Test "Start render initializes tracking" started.
◇ Test "AlternateScreenBuffer initialization" started.
◇ Test "Frame height shrinkage cleanup" started.
◇ Test "Category detection performance" started.
◇ Test "Serializes concurrent writes without interleaving (atomic)" started.
◇ Test "RenderMetricsRecorder records and adapts thresholds" started.
◇ Test "Snapshot: 256 and truecolor" started.
◇ Test "FrameBuffer with alternate screen buffer enabled" started.
◇ Test "Backpressure dropNewest drops when buffer is full" started.
◇ Test "History respects maximum size limit" started.
◇ Test "Wraps colored emoji/CJK by display columns and preserves right edge" started.
◇ Test "Record lines changed accumulates correctly" started.
◇ Test "Region repaint with cursor management" started.
◇ Test "Snapshot: 16-color + effects" started.
◇ Test "Default text attributes should have no styling" started.
◇ Test "FrameBuffer with alternate screen buffer disabled" started.
◇ Test "AdaptiveQualityController reduces quality on backpressure and applies no-op" started.
◇ Test "Efficiency calculation is correct" started.
◇ Test "Average performance calculation" started.
◇ Test "Bytes per line calculation" started.
◇ Test "StrategyDeterminer chooses full redraw on nil current or forced" started.
◇ Test "Record dropped frame increments counter" started.
◇ Test "Console capture initialization" started.
◇ Test "Efficiency with zero total lines" started.
◇ Test "AlternateScreenBuffer explicit cleanup" started.
◇ Test "Reset clears all metrics" started.
◇ Test "Record bytes written accumulates correctly" started.
✘ Test "Console capture start and stop" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Initial state is empty" started.
◇ Test "HybridReconciler uses injected differ for delta path" started.
◇ Test "CJK character detection" started.
◇ Test "AlternateScreenBuffer fallback behavior" started.
◇ Test "Multiple renders build history" started.
✘ Test "Console capture handles multiple stdout messages" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Set total lines updates correctly" started.
✘ Test "FrameBuffer stops console capture on clear" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Bytes per line with zero lines changed" started.
✘ Test "FrameBuffer console capture integration" skipped: "Interferes with test runner stdout/stderr"
◇ Test "FullRedrawPolicy triggers by time/frames/quality" started.
◇ Test "Concurrent access is thread-safe" started.
✘ Test "Console capture recent logs" skipped: "Interferes with test runner stdout/stderr"
✘ Test "Console capture buffers log lines" skipped: "Interferes with test runner stdout/stderr"
✘ Test "Console capture clear buffer" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Delta when small change and thresholds OK" started.
◇ Test "Transform uppercasing keeps styles and transforms content only" started.
✘ Test "Console capture multiple start calls are safe" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Full redraw when no current grid or dimensions changed" started.
◇ Test "Finish render records duration and adds to history" started.
✘ Test "Console capture maintains log order" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Average performance with insufficient history" started.
◇ Test "Move cursor" started.
✘ Test "FrameBuffer console capture disabled by default" skipped: "Interferes with test runner stdout/stderr"
✘ Test "Console capture buffer size limit" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Default: Renderer and external atomic writes do not interleave" started.
◇ Test "Frame initialization" started.
◇ Test "Frame buffer initialization" started.
✘ Test "Console capture multiple stop calls are safe" skipped: "Interferes with test runner stdout/stderr"
◇ Test "Delta with no changes keeps cursor at end-of-frame" started.
◇ Test "Renderer initialization with default output" started.
◇ Test "Clear screen" started.
◇ Test "Opt-out: Without shared writer, ordering between lines is not guaranteed" started.
◇ Test "Empty frame" started.
◇ Test "Block policy flushes immediately and clears buffer for oversized data" started.
◇ Test "Renderer initialization with custom output" started.
◇ Test "Hide cursor" started.
◇ Test "Second render clears previous region line-by-line before writing new content" started.
◇ Test "Show cursor" started.
◇ Test "First render writes lines and positions cursor below frame (no full screen clear in ink style)" started.
◇ Test "Render simple frame" started.
◇ Test "Delta renders restore cursor to end-of-frame" started.
◇ Test "ANSI-styled text preserves SGR and uppercases text" started.
◇ Test "Time-based transform on single ANSI span applies to text and preserves SGR" started.
◇ Test "Plain text uppercase is applied directly" started.
◇ Test "Time-based transform on plain text uses provided time" started.
◇ Test "Multiple frame renders maintain state" started.
◇ Test "Frame buffer handles empty frames" started.
◇ Test "Frame buffer handles multiple errors gracefully" started.
◇ Test "Frame buffer handles cursor management" started.
◇ Test "Cursor restoration on error" started.
◇ Test "Frame buffer handles frame height shrinkage" started.
◇ Test "Frame buffer cleanup on abrupt termination" started.
◇ Test "Cleanup on frame buffer deinitialization" started.
◇ Test "Renderer per-line writes are atomic relative to external logs" started.
◇ Test "Atomic writes reduce syscalls vs unbatched writes" started.
◇ Test "Backpressure policies are documented and configurable" started.
◇ Test "FileHandleOutputEncoder writes to pipe" started.
◇ Test "ANSICursorManager emits sequences" started.
[?25l[2J[H[0m[1;1H[2K                                        [0m[2;1H[2K                                        [0m[3;1H[2K                                        [0m[4;1H[2K                                        [0m◇ Test "Strict: No content before enter; none after leave" started.
[5;1H[2K      Frame Buffer Test                 [0m[6;1H[2K      Second Line                       [0m✔ Test "runAppAndReturnExitCode returns the app's exit code" passed after 0.280 seconds.
✔ Test "helper returns 0 when app exits with nil error" passed after 0.280 seconds.
✔ Test "exit(error:) uses default code 1 for plain errors" passed after 0.280 seconds.
[?25l✔ Test "exit(nil) yields code 0 (success)" passed after 0.280 seconds.
[?25l[?25l[?25l[?25l✔ Test "exit(error:) uses provided custom exit code when error conforms" passed after 0.280 seconds.
[?25l[?25l✔ Test "useApp().exit() triggers unmount and resolves waitUntilExit" passed after 0.280 seconds.
[?25l[?25l[?25l✔ Test "Ctrl-C triggers unmount when exitOnCtrlC=true via InputManager path" passed after 0.279 seconds.
✔ Suite "RuneCLI exit helper" passed after 0.282 seconds.
✔ Suite "RUNE-39+: App exit code propagation via useApp().exit(error:)" passed after 0.282 seconds.
✔ Suite InputManagerTests passed after 0.282 seconds.
[?25l✔ Test "useApp().clear() stops console capture but keeps handle active" passed after 0.280 seconds.
✔ Suite "RUNE-39: useApp() context" passed after 0.283 seconds.
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K                                                                                [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2KTop                                                                             [0m[2;1H[2K                                                                                [0m[3;1H[2KBottom                                                                          [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2KCount: 0                                                                        [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h✔ Test "Box works with render() function and RenderHandle" passed after 0.282 seconds.
✔ Test "Default environment streams are exposed with metadata" passed after 0.283 seconds.
✔ Test "Hooks surface configured custom streams" passed after 0.283 seconds.
✔ Suite "RUNE-27 integration tests" passed after 0.284 seconds.
✔ Suite "RUNE-40: useStdin/Stdout/Stderr hooks" passed after 0.284 seconds.
[?25l[?25l[?25l[?25l[?25l[25;1H[?25h[?25l[25;1H[?25h[25;1H[?25h[25;1H[?25h[25;1H[?25h[?25l[25;1H[?25h[?25l[25;1H[?25h✔ Test "Signed zeroes: 0.0 and -0.0 are distinct and trigger reruns" passed after 0.283 seconds.
[25;1H[?25h✔ Test "useRef identity persists across rerenders and does not trigger rerender on mutation" passed after 0.282 seconds.
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K                                                                                [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h✔ Test "No-focusables broadcast remains unaffected by manager" passed after 0.282 seconds.
[?25l[?25l[?25l[25;1H[?25h[25;1H[?25h[?25l[25;1H[?25h✔ Test "useMemo recomputes only when deps change" passed after 0.282 seconds.
[?25l[25;1H[?25h[?25l✔ Test "Identity wrapper opts into object-identity dep semantics" passed after 0.284 seconds.
[25;1H[?25h✔ Test "Custom Hashable with changing description triggers deps change" passed after 0.284 seconds.
✔ Test "Frame rate limiting allows frames when under limit" passed after 0.275 seconds.
✔ Suite LineDiffPerformanceTests passed after 0.285 seconds.
All lines changing benchmark:
  Line-diff: 9801 bytes, 263.11ms
  Full redraw: 10445 bytes, 6.04ms
  Efficiency: 0.0%
✔ Test "Benchmark: All lines changing favors full redraw" passed after 0.280 seconds.
[?25l[25;1H[?25h[?25l[25;1H[?25h✔ Test "Double.nan encodes to a stable deps token across commits" passed after 0.285 seconds.
✔ Suite "Hooks deps equality edge cases" passed after 0.287 seconds.
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2KCount: 0                                                                        [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h✔ Test "State preserves across rerenders with stable identity" passed after 0.285 seconds.
✔ Suite ViewStatePreservationTests passed after 0.287 seconds.
✔ Test "Block policy flushes immediately and clears buffer for oversized data" passed after 0.279 seconds.
✔ Suite "Output writer blocking behavior" passed after 0.286 seconds.
[?25l[25;1H[?25h✔ Test "Concurrent clear/rerender/unmount is safe" passed after 0.284 seconds.
✔ Suite RenderHandleConcurrencyStressTests passed after 0.287 seconds.
[?25l[25;1H[?25h✔ Test "useEffect deps sugar: nil runs every commit, [] mount-only, values trigger rerun" passed after 0.285 seconds.
✔ Suite "Hooks additional tests: deps sugar, useRef, useMemo" passed after 0.288 seconds.
[?25l[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K┌──────────────────────────────────────────────────────────────────────────────┐[0m[2;1H[2K│[37m[1mAlt Screen Demo[39m[0m                                                               │[0m[3;1H[2K│                                                                              │[0m[4;1H[2K│                                                                              │[0m[5;1H[2K│                                                                              │[0m[6;1H[2K│                                                                              │[0m[7;1H[2K│                                                                              │[0m[8;1H[2K│                                                                              │[0m[9;1H[2K│                                                                              │[0m[10;1H[2K│                                                                              │[0m[11;1H[2K│                                                                              │[0m[12;1H[2K│                                                                              │[0m[13;1H[2K│                                                                              │[0m[14;1H[2K│                                                                              │[0m[15;1H[2K│                                                                              │[0m[16;1H[2K│                                                                              │[0m[17;1H[2K│                                                                              │[0m[18;1H[2K│                                                                              │[0m[19;1H[2K│                                                                              │[0m[20;1H[2K│                                                                              │[0m[21;1H[2K│                                                                              │[0m[22;1H[2K│                                                                              │[0m[23;1H[2K│                                                                              │[0m[24;1H[2K└──────────────────────────────────────────────────────────────────────────────┘[0m[25;1H[?25hNo changes benchmark:
  Line-diff: 2092 bytes, 267.21ms
  Full redraw: 21100 bytes, 10.62ms
  Bytes saved: 19008
  Efficiency: 90.0%
✔ Test "Benchmark: No changes favor line-diff" passed after 0.289 seconds.
✔ Test "Resize during render does not crash and yields a single repaint per burst" passed after 0.294 seconds.
Single line changes benchmark:
  Line-diff: 2966 bytes, 268.42ms
  Full redraw: 21100 bytes, 10.80ms
  Bytes saved: 18134
  Efficiency: 85.5%
✔ Test "Benchmark: Single line changes favor line-diff" passed after 0.290 seconds.
Automatic mode benchmark:
  Automatic: 13040 bytes, 268.85ms
  Full redraw: 21100 bytes, 10.48ms
  Bytes saved: 8060
  Efficiency: 38.0%
✔ Test "Benchmark: Automatic mode makes good decisions" passed after 0.290 seconds.
✔ Suite "Line diff benchmark tests" passed after 0.296 seconds.
✔ Test "In-place repaint without flicker" passed after 0.292 seconds.
✔ Test "Frame buffer handles frame height shrinkage" passed after 0.289 seconds.
✔ Test "Frame height shrinkage cleanup" passed after 0.292 seconds.
✔ Suite AlternateScreenBufferTests passed after 0.298 seconds.
✔ Test "Two distinct bursts cause two rerenders" passed after 0.298 seconds.
✔ Suite "Resize handling tests" passed after 0.299 seconds.
[?25l✔ Test "Composite view body is converted to Box/Text and renders border glyphs" passed after 0.301 seconds.
✔ Suite "Composite View resolution renders child components (no placeholders)" passed after 0.303 seconds.
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K                                                                                [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h✔ Test "Meta: ESC-prefixed ASCII letter is delivered" passed after 0.314 seconds.
✔ Test "When no focusables are registered, useInput remains broadcast to all active handlers (back-compat)" passed after 0.313 seconds.
✔ Test "Multiple frame renders maintain state" passed after 0.312 seconds.
✔ Suite "Frame buffer integration tests" passed after 0.320 seconds.
✔ Test "Unsubscribe on unmount; no leaks" passed after 0.325 seconds.
[?25l[1S[24;1H                                                                                [25;1H[?25h✔ Test "Hook receives arrow/function/ctrl/meta keys" passed after 0.333 seconds.
✔ Test "F1-F4 (SS3), F6-F12 (CSI), Home/End/Page with modifiers, Shift+Ctrl" passed after 0.332 seconds.
✔ Suite "RUNE-38: useInput matrix" passed after 0.335 seconds.
✔ Test "Tab advances focus via useFocusManager hook" passed after 0.348 seconds.
✔ Test "Global input handlers receive events regardless of focus; others are gated" passed after 0.347 seconds.
✔ Test "isActive gates handler" passed after 0.348 seconds.
✔ Test "Direct focus by id/path works" passed after 0.346 seconds.
✔ Suite "RUNE-41: useFocusManager hook integration" passed after 0.350 seconds.
✔ Suite "RUNE-38: useInput hook" passed after 0.350 seconds.
✔ Test "Tab cycles focus among focusable elements and gates input to focused one" passed after 0.379 seconds.
✔ Suite "RUNE-41: Focus registry + useFocus/useFocusManager" passed after 0.382 seconds.
✔ Test "Programmatic next/previous cycles focus and gates input" passed after 0.437 seconds.
✔ Suite "RUNE-41: useFocusManager hook" passed after 0.440 seconds.
✔ Test run with 609 tests passed after 0.440 seconds.
