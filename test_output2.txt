Building for debugging...
[0/4] Write swift-version--58304C5D6DBC2206.txt
Build complete! (0.15s)
â—‡ Test run started.
â†³ Testing Library Version: 124.4
â†³ Target Platform: arm64e-apple-macos14.0
â—‡ Suite TextStyleSnapshotTests started.
â—‡ Suite TextStyleTypeTests started.
â—‡ Suite ANSITokenizerBasicTests started.
â—‡ Suite SGRDiffingV2Tests started.
â—‡ Suite SGRDiffingTests started.
â—‡ Suite ANSITokenizerSGRTests started.
â—‡ Suite TextAttributesTests started.
â—‡ Suite TextErgonomicsTests started.
â—‡ Suite ComponentTests started.
â—‡ Suite TransformExactStringTests started.
â—‡ Suite LineComposerGoldenZWJTests started.
â—‡ Suite TextWrappingSnapshotTests started.
â—‡ Suite ANSITokenizerControlTests started.
â—‡ Suite "RuneCLI exit helper" started.
â—‡ Suite InvalidColorAndInverseTests started.
â—‡ Suite TextWrappingTests started.
â—‡ Suite BoxBorderBackgroundANSITests started.
â—‡ Suite "Transform time-aware initializer tests" started.
â—‡ Suite SpacerCrossAxisTests started.
â—‡ Suite TerminalProfileTests started.
â—‡ Suite ANSIAwareWrapSliceTests started.
â—‡ Suite SGRAttributeToggleTests started.
â—‡ Suite TransformANSISafetyTests started.
â—‡ Suite UnicodeCategoriesNormalizationTests started.
â—‡ Suite WidthGoldenTests started.
â—‡ Suite StyledTextExampleTests started.
â—‡ Suite TextSpanTests started.
â—‡ Suite SGRMicroOptimizationsTests started.
â—‡ Suite StyledTextOperationsTests started.
â—‡ Suite UnicodeCategoriesBasicTests started.
â—‡ Suite SGRStateMachineTests started.
â—‡ Suite WidthWcwidthTests started.
â—‡ Suite ANSIConversionTests started.
â—‡ Suite TextModifiersTests started.
â—‡ Suite RenderOptionsTests started.
â—‡ Suite ExtendedPictographicScalarTests started.
â—‡ Suite WidthBasicTests started.
â—‡ Suite WidthEastAsianTests started.
â—‡ Suite TextStyleMatrixTests started.
â—‡ Suite WidthPerformanceTests started.
â—‡ Suite AlignmentSnapshotTests started.
â—‡ Suite TextStyleParityTests started.
âœ˜ Suite "Concurrency and integration tests" skipped: "Timing-sensitive tests that can hang"
â—‡ Suite ChildIdentityReconcilerTests started.
â—‡ Suite FlexAdvancedLayoutTests started.
â—‡ Suite BoxFlexLayoutIntegrationTests started.
â—‡ Suite AlignmentWrapMatrixTests started.
â—‡ Suite WrapEmojiClippingE2ETests started.
â—‡ Suite UnicodeCategoriesEnumTests started.
â—‡ Suite "Hooks additional tests: deps sugar, useRef, useMemo" started.
â—‡ Suite LineComposerTests started.
â—‡ Suite FlexLayoutTests started.
â—‡ Suite "Render handle rerender tests" started.
â—‡ Suite UnicodeCategoriesEdgeCasesTests started.
â—‡ Suite SignalHandlerTests started.
â—‡ Suite YogaRawValueValidationTests started.
â—‡ Suite "Hooks runtime tests for RUNE-37" started.
â—‡ Suite "RUNE-40: useStdin/Stdout/Stderr hooks" started.
â—‡ Suite "Yoga Integration Tests" started.
â—‡ Suite "RUNE-41: Focus registry + useFocus/useFocusManager" started.
â—‡ Suite AlternateScreenBufferIntegrationTests started.
â—‡ Suite RenderHandleConcurrencyStressTests started.
â—‡ Suite "RUNE-27 integration tests" started.
â—‡ Suite "RUNE-38: useInput hook" started.
â—‡ Suite BoxLayoutTests started.
â—‡ Suite "Resize handling tests" started.
â—‡ Suite "RUNE-38: useInput matrix" started.
â—‡ Suite "RUNE-39+: App exit code propagation via useApp().exit(error:)" started.
â—‡ Suite FlexLayoutSnapshotTests started.
â—‡ Suite "Render handle control tests" started.
â—‡ Suite AdvancedInputDecodingTests started.
â—‡ Suite HybridDifferInjectionTests started.
â—‡ Suite "Render function tests" started.
â—‡ Suite LineDiffTests started.
â—‡ Suite RenderConfigurationTests started.
âœ˜ Suite "Ticker tests" skipped: "Timing-sensitive test that can hang"
â—‡ Suite RuneCLISmokeTests started.
â—‡ Suite RuneKitTests started.
â—‡ Suite ViewStatePreservationTests started.
â—‡ Suite "Output writer blocking behavior" started.
â—‡ Suite InputManagerTests started.
â—‡ Suite TextColorBleedTests started.
â—‡ Suite "Pluggable IO ordering tests" started.
â—‡ Suite "Line diff benchmark tests" started.
â—‡ Suite "PTY integration tests" started.
â—‡ Suite "RUNE-39: useApp() context" started.
â—‡ Suite "RUNE-41: useFocusManager hook" started.
â—‡ Suite HybridReconcilerPolicyTests started.
â—‡ Suite CursorReturnPolicyTests started.
â—‡ Suite AutowrapGuardTests started.
â—‡ Suite ScrollOptimizationNShiftTests started.
â—‡ Suite ScrollOptimizationTests started.
â—‡ Suite "Output writer tests" started.
â—‡ Suite CursorPolicyTests started.
â—‡ Suite PerformanceMetricsTests started.
â—‡ Suite "Frame buffer integration tests" started.
â—‡ Suite "Output abstractions tests" started.
â—‡ Suite "Line diff frame buffer tests" started.
â—‡ Suite "Composite View resolution renders child components (no placeholders)" started.
â—‡ Suite "RUNE-41: useFocusManager hook integration" started.
â—‡ Suite TerminalRendererTests started.
â—‡ Suite "Hooks deps equality edge cases" started.
â—‡ Suite AlternateScreenBufferTests started.
â—‡ Suite "Alt-screen ordering boundaries" started.
â—‡ Suite TerminalGridANSIAwareTests started.
â—‡ Suite PerformanceTimingExposureTests started.
â—‡ Suite LineDiffPerformanceTests started.
â—‡ Suite LogLaneTests started.
â—‡ Suite "Ink-style renderer behavior on main screen buffer" started.
â—‡ Suite StrategyDeterminerTests started.
â—‡ Suite "Output serialization integration" started.
â—‡ Suite ConsoleCaptureTests started.
â—‡ Test "Truncate appends reset and prevents style bleed" started.
â—‡ Suite LogLaneANSIWIdeWrapTests started.
â—‡ Test "Text init with style renders correctly" started.
â—‡ Test "Text attributes with bold styling" started.
â—‡ Test "256-color palette" started.
â—‡ Test "Plain text without ANSI codes" started.
â—‡ Test "Attribute-level diff emits reset when reverting to default and caches common attrs" started.
â—‡ Test "Snapshot: 256 and truecolor" started.
â—‡ Test "Default text attributes should have no styling" started.
â—‡ Test "Overlay last-wins and conversion to attributes" started.
â—‡ Test "Empty string returns empty array" started.
â—‡ Test "RGB colors" started.
â—‡ Test "Conditional helpers apply only when condition is true" started.
â—‡ Test "Generator avoids redundant SGR when attributes unchanged" started.
â—‡ Test "Hex color helpers parse and apply when valid, ignore when invalid" started.
â—‡ Test "Text attributes with color" started.
â—‡ Test "Text component with content longer than width" started.
â—‡ Test "Transform with zero dimensions returns empty" started.
â—‡ Test "Text attributes equality" started.
â—‡ Test "Basic ANSI colors" started.
â—‡ Test "Transform applies simple string transformation" started.
â—‡ Test "AlignSelf center overrides parent alignItems" started.
â—‡ Test "Snapshot: 16-color + effects" started.
â—‡ Test "Newline component with negative count treats as zero" started.
â—‡ Test "Complex attribute combinations" started.
â—‡ Test "RUNE27 demo Spacer examples work correctly" started.
â—‡ Test "Multiple SGR parameters" started.
â—‡ Test "AlignSelf auto inherits from parent alignItems" started.
â—‡ Test "Text component with width constraint and styling" started.
â—‡ Test "Static component immutability" started.
â—‡ Test "Text component with RGB color" started.
â—‡ Test "Static component with multiple lines" started.
â—‡ Test "Box with Text child renders emoji correctly" started.
â—‡ Test "Box with single border renders correctly" started.
â—‡ Test "Text component with underline styling" started.
â—‡ Test "Simple SGR color code" started.
â—‡ Test "Transform uppercasing keeps styles and transforms content only" started.
â—‡ Test "Text component with color styling" started.
â—‡ Test "Text component with background color" started.
â—‡ Test "Text component with inverse styling" started.
â—‡ Test "Box with emoji content handles width correctly" started.
â—‡ Test "Static component with emoji width constraint" started.
â—‡ Test "Box supports alignSelf property" started.
â—‡ Test "Empty box component" started.
â—‡ Test "Box with zero dimensions" started.
â—‡ Test "Box with system monitor style content renders correctly" started.
â—‡ Test "Text component prevents color bleed at line boundaries" started.
â—‡ Test "Newline component with count 1 renders single newline" started.
â—‡ Test "Box with border and padding renders correctly" started.
â—‡ Test "Text component with zero height" started.
â—‡ Test "Text component with no styling should not add ANSI codes" started.
â—‡ Test "Transform handles complex ANSI sequences without breaking them" started.
â—‡ Test "Text component RGB and 256 color snapshots" started.
â—‡ Test "Box with rounded border renders correctly" started.
â—‡ Test "Text component with zero dimensions" started.
â—‡ Test "Spacer with no available space has zero size" started.
â—‡ Test "Text component with empty content and styling" started.
â—‡ Test "Text component with empty content has no color bleed" started.
â—‡ Test "Static component ordering consistency" started.
â—‡ Test "Box border rendering with emoji content" started.
â—‡ Test "Static component with emoji content" started.
â—‡ Test "Static component with width constraint" started.
â—‡ Test "Text component with bold styling" started.
â—‡ Test "Box with double border renders correctly" started.
â—‡ Test "Spacer in column layout consumes remaining vertical space" started.
â—‡ Test "Text component with CJK characters and styling" started.
â—‡ Test "Transform with empty child renders empty" started.
â—‡ Test "Newline component with count 0 renders no lines" started.
â—‡ Test "Box with border and content renders correctly" started.
â—‡ Test "Text component with special characters and styling" started.
â—‡ Test "Text component with emoji and styling" started.
â—‡ Test "Multiple spacers divide remaining space equally" started.
â—‡ Test "Box with minimum dimensions handles borders correctly" started.
â—‡ Test "Split never breaks ZWJ family at boundary" started.
â—‡ Test "Static component with CJK characters" started.
â—‡ Test "Box with CJK content handles width correctly" started.
â—‡ Test "Spacer component exists and conforms to Component protocol" started.
â—‡ Test "AlignSelf stretch makes child fill cross-axis" started.
â—‡ Test "Text component with multiple lines prevents color bleed" started.
â—‡ Test "Newline component View protocol conformance" started.
â—‡ Test "Box with text child" started.
â—‡ Test "Text component with zero width" started.
â—‡ Test "Spacer does not affect cross-axis sizing" started.
â—‡ Test "Newline component with count 3 renders three newlines" started.
â—‡ Test "Box with multiple Text children renders correctly" started.
â—‡ Test "Box prevents emoji clipping at border edges" started.
â—‡ Test "Spacer in row layout consumes remaining horizontal space" started.
â—‡ Test "Static component with single line" started.
â—‡ Test "Static component with height constraint" started.
â—‡ Test "Transform with Box preserves borders correctly" started.
â—‡ Test "Wrap preserves ZWJ family across lines" started.
â—‡ Test "Static component with zero dimensions" started.
â—‡ Test "createBoxFrame with emoji renders borders correctly" started.
â—‡ Test "Transform handles emoji and Unicode correctly" started.
â—‡ Test "AlignSelf enum exists with all required cases" started.
â—‡ Test "Newline component exists and conforms to Component protocol" started.
â—‡ Test "Transform component exists and conforms to Component protocol" started.
â—‡ Test "Text component reset code placement" started.
â—‡ Test "RUNE32 real-world layout patterns work correctly" started.
â—‡ Test "ANSI-aware display width calculation" started.
â—‡ Test "Text component with 256 color" started.
â—‡ Test "Snapshot: wrap mixed styles + emoji/ZWJ/CJK" started.
â—‡ Test "Transform with nested styled components preserves all ANSI" started.
â—‡ Test "Static component View protocol conformance" started.
â—‡ Test "Text component with emoji style combinations" started.
â—‡ Test "Newline component with large count respects height constraint" started.
â—‡ Test "Unterminated OSC is treated as plain text (no .osc token)" started.
â—‡ Test "Text component style combination snapshots" started.
â—‡ Test "Text component with dim styling" started.
â—‡ Test "Newline component respects height constraint" started.
â—‡ Test "Box with border renders correctly" started.
â—‡ Test "Spacer renders as empty content" started.
â—‡ Test "Text component with CJK style combinations" started.
â—‡ Test "Text component with multiple styles" started.
â—‡ Test "Text component with italic styling" started.
â—‡ Test "Transform chains multiple transformations correctly" started.
â—‡ Test "Newline component produces no SGR leakage" started.
â—‡ Test "Box with too small dimensions gracefully degrades" started.
â—‡ Test "Newline component with zero height renders no lines" started.
â—‡ Test "Cursor up by 3 (CSI A)" started.
â—‡ Test "OSC window title with BEL terminator round-trips identically" started.
â—‡ Test "Invalid 256-color SGR parameter is ignored gracefully" started.
â—‡ Test "OSC window title with ST terminator parses and canonicalizes to BEL on encode" started.
â—‡ Test "runAppAndReturnExitCode returns the app's exit code" started.
â—‡ Test "Newline component with zero width renders correctly" started.
â—‡ Test "Text component with strikethrough styling" started.
â—‡ Test "Generator omits SGR for invalid color values in attributes" started.
â—‡ Test "Invalid RGB SGR parameters are ignored gracefully" started.
â—‡ Test "Transform preserves ANSI sequences correctly" started.
â—‡ Test "Erase line to end (CSI K with default)" started.
â—‡ Test "Erase display all (CSI 2J)" started.
â—‡ Test "Static component with empty lines" started.
â—‡ Test "wrappedLines preserves ANSI and avoids bleed with emojis/ZWJ/CJK" started.
â—‡ Test "Text component plain text has no ANSI codes" started.
â—‡ Test "Borders get colored and background fills content area without bleed" started.
â—‡ Test "Box with border style none" started.
â—‡ Test "basic16 maps RGB and 256 to 16-colors" started.
â—‡ Test "Inverse with explicit fg and bg keeps both color codes" started.
â—‡ Test "helper returns 0 when app exits with nil error" started.
â—‡ Test "TrueColor preserves RGB and 256" started.
â—‡ Test "Time-aware Transform with constant transform behaves like normal Transform and preserves ANSI" started.
â—‡ Test "Last column guard prevents wide character overflow" started.
â—‡ Test "Text component with simple content" started.
â—‡ Test "noColor strips all color but keeps effects" started.
â—‡ Test "Style toggles maintain correctness with minimal emissions" started.
â—‡ Test "xterm256 maps RGB to 256" started.
â—‡ Test "Spacer remains minimal on cross-axis under alignItems: .stretch" started.
âœ˜ Test "Time-aware Transform produces different output over time" skipped: "Timing-sensitive test that can hang"
â—‡ Test "RUNE-19 Acceptance Criteria: ANSI-aware wrap & slice comprehensive test" started.
â—‡ Test "Slice mixed content preserving grapheme clusters" started.
â—‡ Test "Multi-children ANSI/emoji placement uses display columns and no overlap" started.
â—‡ Test "Handle empty text in display width operations" started.
â—‡ Test "Split styled text by display width with CJK characters" started.
â—‡ Test "Plain text uppercase is applied directly" started.
â—‡ Test "Cursor right default 1 (CSI C with no param)" started.
â—‡ Test "Split styled text with last column guard" started.
â—‡ Test "Prevent color bleed across wrapped lines" started.
âœ˜ Test "Complex emoji width" skipped: "Will be implemented in next iteration"
âœ˜ Test "Simple emoji width" skipped: "Will be implemented in next iteration"
â—‡ Test "Color change does not emit unnecessary reset" started.
âœ˜ Test "Mixed ASCII and emoji" skipped: "Will be implemented in next iteration"
â—‡ Test "Unicode normalization NFKC" started.
â—‡ Test "Wrap mixed ANSI styled text with emoji and CJK characters" started.
â—‡ Test "Unicode normalization NFC" started.
â—‡ Test "Golden test: Transgender flag emoji" started.
â—‡ Test "Wrap styled text preserving ANSI formatting" started.
â—‡ Test "Unicode normalization NFD" started.
â—‡ Test "Complex SGR sequence preservation across splits" started.
â—‡ Test "Run all attributes example" started.
â—‡ Test "Golden test: Japanese flag emoji" started.
â—‡ Test "Golden test: End-of-line scenarios" started.
â—‡ Test "Slice styled text by display columns" started.
â—‡ Test "Unicode normalization NFKD" started.
â—‡ Test "Golden test: Fullwidth comma" started.
â—‡ Test "Split span by display width with CJK" started.
â—‡ Test "Golden test: Family emoji ZWJ sequence" started.
â—‡ Test "Split styled text by display width preserving grapheme clusters" started.
â—‡ Test "Golden test: Chinese ideograph" started.
â—‡ Test "Time-based transform on plain text uses provided time" started.
â—‡ Test "ANSI-styled text preserves SGR and uppercases text" started.
â—‡ Test "Split span at end" started.
â—‡ Test "Run splitting text example" started.
â—‡ Test "Time-based transform on single ANSI span applies to text and preserves SGR" started.
â—‡ Test "Golden test: Slightly smiling face emoji" started.
â—‡ Test "Run complex colors example" started.
â—‡ Test "Zero-width characters handling" started.
â—‡ Test "Split styled text with grapheme cluster boundary protection" started.
â—‡ Test "Combined SGR emitted once, avoid resets between non-default spans" started.
â—‡ Test "Unicode text handling" started.
â—‡ Test "Split span by display width with emoji" started.
âœ˜ Test "Flag emoji width" skipped: "Will be implemented in next iteration"
â—‡ Test "Text span equality" started.
â—‡ Test "Split span at character boundary" started.
â—‡ Test "Unicode version information" started.
â—‡ Test "Run merging spans example" started.
â—‡ Test "Split styled text at column boundary" started.
â—‡ Test "Split span with last column guard" started.
â—‡ Test "Round-trip conversion preserves RGB color" started.
â—‡ Test "Styled text plain text extraction" started.
â—‡ Test "Text span with styled attributes" started.
â—‡ Test "Avoid final reset if already reset when transitioning to default" started.
â—‡ Test "Round-trip conversion preserves 256-color" started.
â—‡ Test "Emoji scalar detection" started.
â—‡ Test "Run basic conversion example" started.
â—‡ Test "Split at invalid indices" started.
â—‡ Test "Reset clears all attributes" started.
â—‡ Test "Split span at beginning" started.
â—‡ Test "256 and RGB colors" started.
â—‡ Test "Empty styled text" started.
â—‡ Test "Styled text with multiple spans" started.
â—‡ Test "Text span with plain text" started.
â—‡ Test "Round-trip conversion preserves plain text" started.
â—‡ Test "Combining mark detection" started.
â—‡ Test "Don't merge spans with different attributes" started.
â—‡ Test "Large text performance" started.
â—‡ Test "Styled text with single span" started.
â—‡ Test "ASCII letter category detection" started.
â—‡ Test "Merge adjacent compatible spans" started.
â—‡ Test "Basic Latin characters" started.
â—‡ Test "Round-trip conversion preserves complex styling" started.
â—‡ Test "Color override: last wins" started.
â—‡ Test "Whitespace characters" started.
â—‡ Test "Convert simple SGR tokens to spans" started.
â—‡ Test "Combining marks have zero width" started.
â—‡ Test "Convert 256-color tokens to spans" started.
â—‡ Test "Handle malformed SGR parameters gracefully" started.
â—‡ Test "Round-trip conversion preserves simple styling" started.
â—‡ Test "Handle empty spans in merge" started.
â—‡ Test "Convert empty token array" started.
â—‡ Test "Convert multiple SGR tokens to spans" started.
â—‡ Test "Convert mixed tokens with non-SGR sequences" started.
â—‡ Test "Convert empty styled text to tokens" started.
â—‡ Test "Control characters have zero width" started.
â—‡ Test "Merge multiple adjacent compatible spans" started.
â—‡ Test "Convert plain text spans to tokens" started.
â—‡ Test "Convert styled spans to tokens" started.
â—‡ Test "Convert 256-color spans to tokens" started.
â—‡ Test "Chainable modifiers compose and render" started.
âœ˜ Test "Chinese characters width" skipped: "Will be implemented in next iteration"
â—‡ Test "String with combining marks" started.
â—‡ Test "RenderOptions CI environment heuristics" started.
â—‡ Test "Convert tokens with only SGR (no text)" started.
â—‡ Test "Convert plain text tokens to spans" started.
â—‡ Test "East Asian Width - Chinese ideographs" started.
â—‡ Test "Basic EP boundary checks" started.
â—‡ Test "Convert RGB color spans to tokens" started.
â—‡ Test "Basic style enable/disable and colors" started.
â—‡ Test "RenderOptions initialization with defaults" started.
â—‡ Test "RenderOptions initialization with custom values" started.
â—‡ Test "Convert RGB color tokens to spans" started.
âœ˜ Test "Japanese characters width" skipped: "Will be implemented in next iteration"
â—‡ Test "Common style combinations produce ANSI and reset" started.
â—‡ Test "East Asian Width - Fullwidth characters" started.
â—‡ Test "Convert multiple spans to tokens" started.
â—‡ Test "Performance benchmark: Enhanced width calculation" started.
â—‡ Test "RenderOptions TTY detection" started.
â—‡ Test "Grapheme cluster API for combining character" started.
â—‡ Test "AlignItems options work correctly in row layout" started.
â—‡ Test "East Asian Width - Halfwidth characters" started.
â—‡ Test "Alignment works correctly with borders and padding" started.
â—‡ Test "Null character width" started.
â—‡ Test "East Asian Width - Japanese characters" started.
â—‡ Test "ASCII string with spaces" started.
â—‡ Test "Spacer works correctly with different alignment combinations" started.
â—‡ Test "Empty text with styling renders empty line" started.
â—‡ Test "AlignSelf options work correctly and override parent alignItems" started.
â—‡ Test "Performance benchmark: ASCII baseline" started.
â—‡ Test "JustifyContent options work correctly in row layout" started.
â—‡ Test "Empty string has zero width" started.
â—‡ Test "ASCII scalar width" started.
â—‡ Test "Performance benchmark for common strings" started.
â—‡ Test "Delete character width" started.
â—‡ Test "East Asian scalar width" started.
â—‡ Test "Space character width" started.
â—‡ Test "Text ignores invalid color components when using RGB/256" started.
â—‡ Test "Grapheme cluster API for East Asian character" started.
â—‡ Test "ASCII characters have width 1" started.
â—‡ Test "Min width constraint prevents shrinking below minimum" started.
âœ˜ Test "Concurrency safety: unmount during other operations" skipped: "Timing-sensitive tests that can hang"
â—‡ Test "Flex wrap respects emoji-safe width boundaries" started.
â—‡ Test "Text supports combined styles including inverse and colors" started.
âœ˜ Test "Integration test: Signal handler properly calls unmount" skipped: "Timing-sensitive tests that can hang"
â—‡ Test "Vertical overflow is clipped in wrapped layout" started.
âœ˜ Test "Integration test: Terminal size detection" skipped: "Timing-sensitive tests that can hang"
â—‡ Test "Preserve child state across reordering with stable identity" started.
â—‡ Test "Parametric matrix: alignItems Ã— justifyContent Ã— flexWrap Ã— direction" started.
â—‡ Test "Box layout integrates with Text component sizing" started.
âœ˜ Test "Integration test: View to Component conversion" skipped: "Timing-sensitive tests that can hang"
â—‡ Test "Overflow is clipped at wrap boundaries" started.
â—‡ Test "Max width constraint prevents growing beyond maximum" started.
â—‡ Test "Symbol category detection" started.
âœ˜ Test "Concurrency safety: multiple waitUntilExit calls" skipped: "Timing-sensitive tests that can hang"
â—‡ Test "Number category detection" started.
â—‡ Test "Grapheme cluster API for simple ASCII" started.
â—‡ Test "Box layout respects FlexLayout coordinate system" started.
â—‡ Test "Box layout works with nested Box components" started.
âœ˜ Test "Concurrency safety: multiple simultaneous operations" skipped: "Timing-sensitive tests that can hang"
â—‡ Test "Box layout maintains FlexLayout immutability principles" started.
â—‡ Test "Box layout API is consistent with FlexLayout patterns" started.
âœ˜ Test "Integration test: Complete render handle lifecycle" skipped: "Timing-sensitive tests that can hang"
â—‡ Test "Punctuation category detection" started.
â—‡ Test "Control character scalar width" started.
â—‡ Test "Wrap and clip emoji with borders without exceeding width" started.
â—‡ Test "Box layout handles FlexLayout.Rect edge cases" started.
â—‡ Test "Split preserves SGR and grapheme boundaries" started.
â—‡ Test "Box with percentage dimensions" started.
â—‡ Test "Size equality" started.
â—‡ Test "Box layout doesn't interfere with FlexLayout performance" started.
â—‡ Test "Flex wrap creates new line when content overflows" started.
â—‡ Test "Box with margin affects positioning" started.
â—‡ Test "Single child layout" started.
â—‡ Test "Box with fixed dimensions" started.
â—‡ Test "Category detection performance" started.
â—‡ Test "Multiple children in column direction" started.
â—‡ Test "useRef identity persists across rerenders and does not trigger rerender on mutation" started.
â—‡ Test "rerender() preserves state for same view identity" started.
â—‡ Test "Box with padding produces correct layout" started.
âœ˜ Test "rerender() updates UI content" skipped: "Disabled to prevent CI hanging on pipe reads"
â—‡ Test "FlexLayout.calculateLayout still works with existing API" started.
â—‡ Test "Multiple children in row direction" started.
â—‡ Test "CJK character detection" started.
â—‡ Test "Box column layout with row gap" started.
âœ˜ Test "Effect re-runs on deps change and previous cleanup executes" skipped: "Timing-sensitive test that can hang"
â—‡ Test "Control character detection" started.
â—‡ Test "useMemo recomputes only when deps change" started.
â—‡ Test "Rect equality" started.
â—‡ Test "Margin affects element positioning" started.
â—‡ Test "YogaWrapper mappings use expected raw values" started.
â—‡ Test "Default environment streams are exposed with metadata" started.
â—‡ Test "rerender() handles view identity changes" started.
â—‡ Test "Yoga layout engine singleton" started.
âœ˜ Test "useEffect runs on mount and cleanup runs on unmount; requestRerender drives ~10-12 Hz" skipped: "Timing-sensitive test that can hang"
â—‡ Test "Justify content space between works correctly" started.
â—‡ Test "Empty children array returns empty rects" started.
â—‡ Test "Hooks surface configured custom streams" started.
â—‡ Test "Box row layout with column gap" started.
â—‡ Test "useEffect deps sugar: nil runs every commit, [] mount-only, values trigger rerun" started.
â—‡ Test "Wrap produces lines that rejoin to original ignoring resets" started.
â—‡ Test "Justify content center works correctly" started.
â—‡ Test "Padding affects child positioning" started.
â—‡ Test "Align self center overrides parent align items" started.
â—‡ Test "Min and max height constraints work in column direction" started.
â—‡ Test "Global input handlers receive events regardless of focus; others are gated" started.
â—‡ Test "Multiple layout calculations don't leak memory" started.
â—‡ Test "SignalHandler initialization" started.
â—‡ Test "SignalHandler install and cleanup" started.
â—‡ Test "Box layout produces compatible rectangles with FlexLayout" started.
â—‡ Test "Basic row layout calculation" started.
â—‡ Test "Float to terminal coordinate conversion" started.
â—‡ Test "Tab cycles focus among focusable elements and gates input to focused one" started.
â—‡ Test "Align items center works correctly" started.
â—‡ Test "FlexLayout uses Yoga backend correctly" started.
â—‡ Test "When no focusables are registered, useInput remains broadcast to all active handlers (back-compat)" started.
â—‡ Test "Box layout maintains performance with complex hierarchies" started.
â—‡ Test "rerender() is safe to call multiple times rapidly" started.
â—‡ Test "Meta: ESC-prefixed ASCII letter is delivered" started.
â—‡ Test "Environment variable configuration integration" started.
â—‡ Test "Layout calculation with zero dimensions" started.
â—‡ Test "Identity change resets diff state" started.
â—‡ Test "Box renders different border styles correctly" started.
â—‡ Test "Configuration precedence" started.
â—‡ Test "Box integrates with existing Component system" started.
â—‡ Test "Box works with render() function and RenderHandle" started.
â—‡ Test "Box integrates with View protocol and render pipeline" started.
â—‡ Test "SignalHandler graceful teardown callback" started.
â—‡ Test "Hook receives arrow/function/ctrl/meta keys" started.
â—‡ Test "Unsubscribe on unmount; no leaks" started.
â—‡ Test "Debounced resize burst triggers a single rerender" started.
â—‡ Test "FlexLayout handles empty children" started.
â—‡ Test "Alternate screen buffer with grid rendering" started.
â—‡ Test "Box works with HybridReconciler optimization strategies" started.
â—‡ Test "Flex grow distributes extra space proportionally" started.
â—‡ Test "Resize during render does not crash and yields a single repaint per burst" started.
â—‡ Test "Flex shrink reduces size proportionally when space is insufficient" started.
â—‡ Test "Nested boxes with padding and margin" started.
â—‡ Test "Box renders borders correctly with proper layout" started.
â—‡ Test "Rounding rules for fractional coordinates" started.
â—‡ Test "Box layout integrates with FlexLayout coordinate system" started.
â—‡ Test "Justify content and align items with padding" started.
â—‡ Test "Basic column layout calculation" started.
â—‡ Test "Edge case: Padding larger than container" started.
â—‡ Test "isActive gates handler" started.
â—‡ Test "F1-F4 (SS3), F6-F12 (CSI), Home/End/Page with modifiers, Shift+Ctrl" started.
â—‡ Test "Two distinct bursts cause two rerenders" started.
â—‡ Test "unmount() tears down resources and makes handle inactive" started.
â—‡ Test "exit(nil) yields code 0 (success)" started.
â—‡ Test "Snapshot: Constrained layout with min/max bounds" started.
â—‡ Test "Box layout works consistently across platforms" started.
â—‡ Test "waitUntilExit() resolves immediately if already unmounted" started.
â—‡ Test "Snapshot: Emoji-safe terminal layout" started.
â—‡ Test "Box integrates with FrameBuffer rendering" started.
â—‡ Test "Flex basis sets initial size before grow/shrink" started.
âœ˜ Test "clear() clears screen content" skipped: "Disabled to prevent CI hanging on pipe reads"
â—‡ Test "Decodes CSI function keys F5-F12 and PageUp/Down" started.
â—‡ Test "Row layout with nested column layouts" started.
â—‡ Test "Chunked ESC sequence is decoded when complete" started.
â—‡ Test "exit(error:) uses provided custom exit code when error conforms" started.
â—‡ Test "Yoga node creation and cleanup" started.
â—‡ Test "waitUntilExit() resolves when unmount() is called" started.
â—‡ Test "Complete alternate screen buffer workflow" started.
â—‡ Test "Edge case: Zero dimensions" started.
â—‡ Test "Concurrent clear/rerender/unmount is safe" started.
â—‡ Test "Snapshot: Complex dashboard layout with flex grow/shrink" started.
âœ˜ Test "clear() with alternate screen clears properly" skipped: "Disabled to prevent CI hanging on pipe reads"
â—‡ Test "clear() is safe to call multiple times" started.
â—‡ Test "Snapshot: Responsive card grid with wrapping" started.
â—‡ Test "exit(error:) uses default code 1 for plain errors" started.
â—‡ Test "RenderHandle with console capture" started.
â—‡ Test "Bracketed paste with UTF-8 payload (emoji)" started.
â—‡ Test "RenderHandle with signal handler" started.
â—‡ Test "unmount() is idempotent - multiple calls are safe" started.
â—‡ Test "Multiple line changes" started.
â—‡ Test "Decodes SS3 arrows and F1-F4" started.
â—‡ Test "RenderHandle initialization and basic functionality" started.
â—‡ Test "Empty changes produce empty sequences" started.
â—‡ Test "Identical frames - no changes" started.
âœ˜ Test "Integration test: render function with mock view" skipped: "Disabled to prevent CI interference"
â—‡ Test "Decodes modifiers for arrow keys (Ctrl)" started.
â—‡ Test "No previous frame - all lines are changes" started.
â—‡ Test "Single line change" started.
â—‡ Test "HybridReconciler uses injected differ for delta path" started.
â—‡ Test "Automatic mode makes intelligent decisions" started.
â—‡ Test "Complex nested layout with mixed properties" started.
â—‡ Test "Frame grows - new lines added" started.
â—‡ Test "Generate ANSI sequences for single change" started.
âœ˜ Test "Ticker ticks and cancellation stops future ticks (robust)" skipped: "Timing-sensitive test that can hang"
â—‡ Test "Estimate byte savings for efficient diff" started.
â—‡ Test "Generate ANSI sequences for multiple changes" started.
â—‡ Test "Full redraw mode always returns full redraw" started.
â—‡ Test "Line diff mode respects frame size limits" started.
â—‡ Test "Debug configuration enables extensive logging" started.
â—‡ Test "Frame shrinks - lines removed" started.
â—‡ Test "Environment variable RUNE_ALT_SCREEN=1 enables alternate screen" started.
â—‡ Test "Environment variable RUNE_CONSOLE_CAPTURE=false disables console capture" started.
â—‡ Test "Describe changes produces readable output" started.
â—‡ Test "High frame rate allows more frequent updates" started.
â—‡ Test "Environment variable RUNE_CONSOLE_CAPTURE=1 enables console capture" started.
â—‡ Test "Shutdown with alternate screen cleanup" started.
â—‡ Test "Estimate byte savings for inefficient diff" started.
â—‡ Test "Environment variable RUNE_CONSOLE_CAPTURE=true enables console capture" started.
â—‡ Test "Environment variable RUNE_ALT_SCREEN=invalid disables alternate screen" started.
â—‡ Test "Block policy flushes immediately and clears buffer for oversized data" started.
â—‡ Test "Environment variable RUNE_CONSOLE_CAPTURE=0 disables console capture" started.
â—‡ Test "RuneKit module loads correctly" started.
â—‡ Test "Multiple frame renders in alternate screen" started.
â—‡ Test "Environment variable RUNE_DEBUG enables console capture" started.
â—‡ Test "Optimization mode enum has all expected cases" started.
â—‡ Test "Optimization mode raw values are correct" started.
â—‡ Test "Environment variable RUNE_ALT_SCREEN not set uses default" started.
â—‡ Test "Performance tuning accepts custom values" started.
â—‡ Test "Performance tuning has reasonable defaults" started.
âœ˜ Test "RuneCLI exits promptly in test mode" skipped.
â—‡ Test "High performance configuration has aggressive settings" started.
â—‡ Test "Environment variable RUNE_ALT_SCREEN=true enables alternate screen" started.
â—‡ Test "Frame rate limiting works correctly" started.
â—‡ Test "Conservative configuration has safe settings" started.
â—‡ Test "Line diff mode respects efficiency threshold" started.
â—‡ Test "Environment variable RUNE_ALT_SCREEN=false disables alternate screen" started.
â—‡ Test "Bracketed paste emits single paste event when enabled" started.
â—‡ Test "Decodes arrows and Ctrl-C/ Ctrl-D bytes" started.
â—‡ Test "Ctrl-C triggers unmount when exitOnCtrlC=true via InputManager path" started.
â—‡ Test "State preserves across rerenders with stable identity" started.
â—‡ Test "Integration: RenderHandle unmount cleans up input manager and paste mode" started.
â—‡ Test "Benchmark: All lines changing favors full redraw" started.
â—‡ Test "Environment configuration reads render mode" started.
â—‡ Test "Environment variable RUNE_CONSOLE_CAPTURE not set uses default" started.
â—‡ Test "Benchmark: Automatic mode makes good decisions" started.
â—‡ Test "Default: Renderer and external atomic writes do not interleave" started.
â—‡ Test "No color bleed across lines" started.
â—‡ Test "Default configuration has expected values" started.
â—‡ Test "No-focusables broadcast remains unaffected by manager" started.
â—‡ Test "RUNE-23 acceptance criteria validation (CI-safe)" started.
â—‡ Test "Benchmark: Single line changes favor line-diff" started.
â—‡ Test "Direct focus by id/path works" started.
â—‡ Test "Opt-out: Without shared writer, ordering between lines is not guaranteed" started.
â—‡ Test "Delta with no changes keeps cursor at end-of-frame" started.
âœ˜ Test "Console capture ordering validation" skipped: "Interferes with test runner stdout/stderr"
â—‡ Test "Environment variable RUNE_CONSOLE_CAPTURE case insensitive" started.
â—‡ Test "Environment variable RUNE_ALT_SCREEN=TRUE enables alternate screen" started.
â—‡ Test "useApp().exit() triggers unmount and resolves waitUntilExit" started.
â—‡ Test "RenderMetricsRecorder records and adapts thresholds" started.
â—‡ Test "FullRedrawPolicy triggers by time/frames/quality" started.
â—‡ Test "Custom configuration accepts all parameters" started.
â—‡ Test "StrategyDeterminer chooses full redraw on nil current or forced" started.
â—‡ Test "useApp().clear() stops console capture but keeps handle active" started.
â—‡ Test "Environment variable RUNE_ALT_SCREEN=0 disables alternate screen" started.
â—‡ Test "DECAWM toggles off/on around full redraw when enabled" started.
â—‡ Test "Delta renders restore cursor to end-of-frame" started.
â—‡ Test "Detect two-line downward scroll and emit ESC[2S and write 2 lines" started.
â—‡ Test "AdaptiveQualityController reduces quality on backpressure and applies no-op" started.
â—‡ Test "Renderer respects hideCursorDuringRender=false" started.
â—‡ Test "DECAWM toggles off/on around delta update when enabled" started.
â—‡ Test "Start render initializes tracking" started.
â—‡ Test "Grid omits wide cluster at EOL (fullwidth punctuation)" started.
â—‡ Test "Backpressure dropNewest drops when buffer is full" started.
â—‡ Test "Detect two-line upward scroll and emit ESC[2T and write 2 lines at top" started.
â—‡ Test "Programmatic next/previous cycles focus and gates input" started.
â—‡ Test "Frame buffer cleanup on abrupt termination" started.
â—‡ Test "Multiple frame renders maintain state" started.
â—‡ Test "Record dropped frame increments counter" started.
â—‡ Test "Renderer respects hideCursorDuringRender=true (default)" started.
â—‡ Test "Serializes concurrent writes without interleaving (atomic)" started.
â—‡ Test "Efficiency calculation is correct" started.
âœ˜ Test "PTY integration validates ordering" skipped: "Interferes with test runner stdout/stderr"
â—‡ Test "Grid omits wide cluster at EOL (emoji)" started.
â—‡ Test "Batched writes reduce syscalls vs unbatched" started.
â—‡ Test "Frame buffer handles multiple errors gracefully" started.
â—‡ Test "Frame buffer handles empty frames" started.
â—‡ Test "Set total lines updates correctly" started.
â—‡ Test "Benchmark: No changes favor line-diff" started.
â—‡ Test "History respects maximum size limit" started.
â—‡ Test "Average performance calculation" started.
â—‡ Test "Multiple renders build history" started.
â—‡ Test "Efficiency with zero total lines" started.
â—‡ Test "Bytes per line calculation" started.
â—‡ Test "Frame buffer handles cursor management" started.
â—‡ Test "Initial state is empty" started.
â—‡ Test "Average performance with insufficient history" started.
â—‡ Test "ANSICursorManager emits sequences" started.
â—‡ Test "Automatic mode chooses appropriate optimization" started.
â—‡ Test "Record bytes written accumulates correctly" started.
â—‡ Test "Line-diff mode renders single line change efficiently" started.
â—‡ Test "Large frame falls back to full redraw" started.
â—‡ Test "Line-diff handles frame shrinkage correctly" started.
â—‡ Test "Reset clears all metrics" started.
â—‡ Test "Frame buffer handles frame height shrinkage" started.
â—‡ Test "Full redraw mode renders all lines" started.
â—‡ Test "Detect one-line downward scroll and emit scroll sequence" started.
â—‡ Test "Record lines changed accumulates correctly" started.
â—‡ Test "Empty frame renders correctly" started.
â—‡ Test "Finish render records duration and adds to history" started.
â—‡ Test "Cleanup on frame buffer deinitialization" started.
â—‡ Test "Cursor restoration on error" started.
â—‡ Test "Tab advances focus via useFocusManager hook" started.
â—‡ Test "Concurrent access is thread-safe" started.
â—‡ Test "Move cursor" started.
â—‡ Test "Bytes per line with zero lines changed" started.
â—‡ Test "Grid omits wide cluster at EOL (CJK fullwidth)" started.
â—‡ Test "Renderer initialization with default output" started.
â—‡ Test "FileHandleOutputEncoder writes to pipe" started.
â—‡ Test "Renderer initialization with custom output" started.
â—‡ Test "Signed zeroes: 0.0 and -0.0 are distinct and trigger reruns" started.
â—‡ Test "Composite view body is converted to Box/Text and renders border glyphs" started.
â—‡ Test "Hide cursor" started.
â—‡ Test "Frame initialization" started.
â—‡ Test "Empty frame" started.
â—‡ Test "Custom Hashable with changing description triggers deps change" started.
â—‡ Test "Frame buffer initialization" started.
â—‡ Test "Double.nan encodes to a stable deps token across commits" started.
â—‡ Test "Clear screen" started.
â—‡ Test "Render simple frame" started.
â—‡ Test "Show cursor" started.
â—‡ Test "Line-diff handles frame growth correctly" started.
â—‡ Test "FrameBuffer with alternate screen buffer disabled" started.
â—‡ Test "AlternateScreenBuffer enter sequence" started.
â—‡ Test "AlternateScreenBuffer fallback behavior" started.
â—‡ Test "AlternateScreenBuffer double enter is safe" started.
â—‡ Test "Identity wrapper opts into object-identity dep semantics" started.
â—‡ Test "AlternateScreenBuffer initialization" started.
â—‡ Test "Region repaint with cursor management" started.
â—‡ Test "Frame height shrinkage cleanup" started.
â—‡ Test "AlternateScreenBuffer with fallback enabled" started.
â—‡ Test "FrameBuffer with alternate screen buffer enabled" started.
â—‡ Test "AlternateScreenBuffer double leave is safe" started.
â—‡ Test "AlternateScreenBuffer leave sequence" started.
â—‡ Test "Debug: FrameBuffer default behavior without alternate screen" started.
â—‡ Test "AlternateScreenBuffer explicit cleanup" started.
â—‡ Test "Strict: No content before enter; none after leave" started.
â—‡ Test "In-place repaint without flicker" started.
â—‡ Test "ANSI SGR inside content should not consume columns; right border remains visible" started.
â—‡ Test "HybridReconciler exposes timing consistent with fpsCap" started.
â—‡ Test "Performance metrics are collected correctly" started.
â—‡ Test "Frame rate limiting allows frames when under limit" started.
â—‡ Test "Configuration is accessible and correct" started.
â—‡ Test "Performance history accumulates over multiple renders" started.
â—‡ Test "Default configuration has sensible values" started.
â—‡ Test "Frame rate limiting drops frames when appropriate" started.
â—‡ Test "Configuration is immutable after creation" started.
Content line: 'â”‚ Complete! âœ…     â”‚'
Content line scalars: [9474, 32, 67, 111, 109, 112, 108, 101, 116, 101, 33, 32, 9989, 32, 32, 32, 32, 32, 9474]
DEBUG: Border calculation analysis
  Content: 'ğŸ¯ Welcome to RuneKit!'
  Content display width: 22
  Expected total width: 28
  Using wide width: 100
Content line: 'â”‚ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦â”‚' (count: 3)
Content line characters:
  [0]: 'â”‚' (scalars: [9474])
  [1]: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦' (scalars: [128104, 8205, 128105, 8205, 128103, 8205, 128102])
  [2]: 'â”‚' (scalars: [9474])
â—‡ Test "LogLane creates separator" started.
Width calculation:
  Content: 'Complete! âœ…'
  Content display width: 12
  Total width: 16
â—‡ Test "LogLane formats multiple logs" started.
â—‡ Test "LogLane predefined configurations" started.
â—‡ Test "LogLane includes timestamps when enabled" started.
DEBUG: All lines:
  Line 0: 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”' (length: 20)
    Char 0: 'â”Œ' (Unicode: \u{250c})
    Char 1: 'â”€' (Unicode: \u{2500})
    Char 2: 'â”€' (Unicode: \u{2500})
    Char 3: 'â”€' (Unicode: \u{2500})
    Char 4: 'â”€' (Unicode: \u{2500})
    Char 5: 'â”€' (Unicode: \u{2500})
    Char 6: 'â”€' (Unicode: \u{2500})
    Char 7: 'â”€' (Unicode: \u{2500})
    Char 8: 'â”€' (Unicode: \u{2500})
    Char 9: 'â”€' (Unicode: \u{2500})
    Char 10: 'â”€' (Unicode: \u{2500})
    Char 11: 'â”€' (Unicode: \u{2500})
    Char 12: 'â”€' (Unicode: \u{2500})
    Char 13: 'â”€' (Unicode: \u{2500})
    Char 14: 'â”€' (Unicode: \u{2500})
    Char 15: 'â”€' (Unicode: \u{2500})
    Char 16: 'â”€' (Unicode: \u{2500})
Box with multiple children output:
Line 0: 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”'
Line 1: 'â”‚  Line 1  â”‚'
Line 2: 'â”‚  Line 2  â”‚'
â—‡ Test "LogLane respects max display lines" started.
Line 3: 'â”‚  Line 3  â”‚'
Line 4: 'â”‚          â”‚'
    Char 17: 'â”€' (Unicode: \u{2500})
    Char 18: 'â”€' (Unicode: \u{2500})
    Char 19: 'â”' (Unicode: \u{2510})
Line 5: 'â”‚          â”‚'
  Line 1: 'â”‚ [1;34mLoading.[0m         â”‚' (length: 31)
â—‡ Test "LogLane calculates display height" started.
â—‡ Test "LogLane formats stderr with different prefix" started.
Content without borders: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦' (count: 1)
â—‡ Test "LogLane custom configuration" started.
Content without borders characters:
    Char 0: 'â”‚' (Unicode: \u{2502})
    Char 1: ' ' (Unicode: \u{20})
    Char 2: '' (Unicode: \u{1b})
    Char 3: '[' (Unicode: \u{5b})
    Char 4: '1' (Unicode: \u{31})
    Char 5: ';' (Unicode: \u{3b})
    Char 6: '3' (Unicode: \u{33})
    Char 7: '4' (Unicode: \u{34})
    Char 8: 'm' (Unicode: \u{6d})
    Char 9: 'L' (Unicode: \u{4c})
    Char 10: 'o' (Unicode: \u{6f})
    Char 11: 'a' (Unicode: \u{61})
    Char 12: 'd' (Unicode: \u{64})
    Char 13: 'i' (Unicode: \u{69})
  [0]: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦' (scalars: [128104, 8205, 128105, 8205, 128103, 8205, 128102])
â—‡ Test "LogLane initialization" started.
    Char 14: 'n' (Unicode: \u{6e})
Expected emoji: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦' (scalars: [128104, 8205, 128105, 8205, 128103, 8205, 128102])
â—‡ Test "LogLane wraps long lines" started.
    Char 15: 'g' (Unicode: \u{67})
â—‡ Test "LogLane formats single log line" started.
    Char 16: '.' (Unicode: \u{2e})
Content contains full emoji: true
Content equals full emoji: true
Line 6: 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜'
    Char 17: '' (Unicode: \u{1b})
    Char 18: '[' (Unicode: \u{5b})
    Char 19: '0' (Unicode: \u{30})
    Char 20: 'm' (Unicode: \u{6d})
    Char 21: ' ' (Unicode: \u{20})
    Char 22: ' ' (Unicode: \u{20})
    Char 23: ' ' (Unicode: \u{20})
    Char 24: ' ' (Unicode: \u{20})
    Char 25: ' ' (Unicode: \u{20})
    Char 26: ' ' (Unicode: \u{20})
    Char 27: ' ' (Unicode: \u{20})
    Char 28: ' ' (Unicode: \u{20})
    Char 29: ' ' (Unicode: \u{20})
    Char 30: 'â”‚' (Unicode: \u{2502})
  Line 2: 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜' (length: 20)
    Char 0: 'â””' (Unicode: \u{2514})
    Char 1: 'â”€' (Unicode: \u{2500})
    Char 2: 'â”€' (Unicode: \u{2500})
    Char 3: 'â”€' (Unicode: \u{2500})
    Char 4: 'â”€' (Unicode: \u{2500})
    Char 5: 'â”€' (Unicode: \u{2500})
    Char 6: 'â”€' (Unicode: \u{2500})
    Char 7: 'â”€' (Unicode: \u{2500})
    Char 8: 'â”€' (Unicode: \u{2500})
    Char 9: 'â”€' (Unicode: \u{2500})
    Char 10: 'â”€' (Unicode: \u{2500})
â—‡ Test "Second render clears previous region line-by-line before writing new content" started.
    Char 11: 'â”€' (Unicode: \u{2500})
    Char 12: 'â”€' (Unicode: \u{2500})
    Char 13: 'â”€' (Unicode: \u{2500})
    Char 14: 'â”€' (Unicode: \u{2500})
    Char 15: 'â”€' (Unicode: \u{2500})
    Char 16: 'â”€' (Unicode: \u{2500})
    Char 17: 'â”€' (Unicode: \u{2500})
â—‡ Test "First render writes lines and positions cursor below frame (no full screen clear in ink style)" started.
    Char 18: 'â”€' (Unicode: \u{2500})
    Char 19: 'â”˜' (Unicode: \u{2518})

=== All Attributes Example ===
All attributes ANSI (raw): "\u{1B}[1;2;3;4;7;9;36;40mAll attributes\u{1B}[0m"
Attribute preservation:
  Color: true
  Background: true
  Bold: true
  Italic: true
  Underline: true
  Inverse: true
  Strikethrough: true
  Dim: true
createBoxFrame output:

=== Splitting Text Example ===
Line 0: 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”' (length: 16)
Original text: 'Hello beautiful world!'
Line 1: 'â”‚ Complete! âœ… â”‚' (length: 15)
Line 2: 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜' (length: 16)
Length: 22

=== Complex Colors Example ===
Complex colors ANSI (raw): "\u{1B}[31mBasic red \u{1B}[38;5;196m256-color \u{1B}[38;2;255;165;0mRGB orange\u{1B}[0m"
Split at column 10:
  Left: 'Hello beau' (2 spans)
Round-trip verification:
âœ… RUNE-19 All acceptance criteria verified successfully!
  Right: 'tiful world!' (2 spans)
  Span 0: 'Basic red ' - Color: red

=== Merging Spans Example ===
Before merging: 3 spans
  'Hello '
  'beautiful '
  'world'
After merging: 1 spans
  'Hello beautiful world'
  Span 1: '256-color ' - Color: color256(196)
    Left span 0: 'Hello ' - TextAttributes(color: Optional(RuneANSI.ANSIColor.red), backgroundColor: nil, bold: false, italic: false, underline: false, inverse: false, strikethrough: false, dim: false)
Frame structure:
  Width: 16
  Height: 3
  Lines count: 3
  Frame line 0: 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”' (length: 16)
  Frame line 1: 'â”‚ Complete! âœ… â”‚' (length: 15)
  Frame line 2: 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜' (length: 16)
    Left span 1: 'beau' - TextAttributes(color: nil, backgroundColor: nil, bold: true, italic: false, underline: false, inverse: false, strikethrough: false, dim: false)
=== Basic Conversion Example ===

DEBUG: Line analysis
Input (raw): "\u{1B}[1;31mError:\u{1B}[0m \u{1B}[33mWarning message\u{1B}[0m"
Spans:
  0: 'Error:' (bold red)
    Right span 0: 'tiful ' - TextAttributes(color: nil, backgroundColor: nil, bold: true, italic: false, underline: false, inverse: false, strikethrough: false, dim: false)
  1: ' ' (plain)
  2: 'Warning message' (yellow)
  Span 2: 'RGB orange' - Color: rgb(255, 165, 0)
    Right span 1: 'world!' - TextAttributes(color: Optional(RuneANSI.ANSIColor.blue), backgroundColor: nil, bold: false, italic: false, underline: false, inverse: false, strikethrough: false, dim: false)
Round-trip (raw): "\u{1B}[1;31mError:\u{1B}[0m \u{1B}[33mWarning message\u{1B}[0m"
Identical: true
  Line 0: 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”' (length: 100, display width: 100)
  Line 1: 'â”‚                                                                                                  â”‚' (length: 100, display width: 100)
Grid structure:
  Width: 16
  Height: 3
  Grid line 0: 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”' (length: 16)
  Grid line 1: 'â”‚ Complete! âœ… â”‚' (length: 15)
  Grid line 2: 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜' (length: 16)
  Line 2: 'â”‚  [1;36mğŸ¯ Welcome to RuneKit![0m                                                                          â”‚' (length: 110, display width: 100)
    Expected display width: 28
â—‡ Test "Full redraw when no current grid or dimensions changed" started.
â—‡ Test "Delta when small change and thresholds OK" started.
    Actual display width: 100
    Wide width: 100
System monitor box output:
Line 0: 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”'
Line 1: 'â”‚  System Monitor            â”‚'
Line 2: 'â”‚  CPU: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 80%     â”‚'
Line 3: 'â”‚  RAM: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 60%     â”‚'
Line 4: 'â”‚  DISK: [â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘] 30%    â”‚'
Line 5: 'â”‚  NET: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%    â”‚'
    Difference from expected: 72
Line 6: 'â”‚                            â”‚'
Line 7: 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜'
    Difference from wide: 0
    Ends with border: true
    Last character: 'â”‚'
    Character analysis:
      [0]: 'â”‚' (width: 1)
      [1]: ' ' (width: 1)
      [2]: ' ' (width: 1)
      [3]: '' (width: 0)
      [4]: '[' (width: 1)
      [5]: '1' (width: 1)
      [6]: ';' (width: 1)
      [7]: '3' (width: 1)
      [8]: '6' (width: 1)
      [9]: 'm' (width: 1)
Emoji line analysis:
      [10]: 'ğŸ¯' (width: 2)
      [11]: ' ' (width: 1)
      [12]: 'W' (width: 1)
      [13]: 'e' (width: 1)
      [14]: 'l' (width: 1)
      [15]: 'c' (width: 1)
      [16]: 'o' (width: 1)
      [17]: 'm' (width: 1)
      [18]: 'e' (width: 1)
      [19]: ' ' (width: 1)
      [20]: 't' (width: 1)
      [21]: 'o' (width: 1)
      [22]: ' ' (width: 1)
      [23]: 'R' (width: 1)
      [24]: 'u' (width: 1)
      [25]: 'n' (width: 1)
      [26]: 'e' (width: 1)
      [27]: 'K' (width: 1)
      [28]: 'i' (width: 1)
      [29]: 't' (width: 1)
      [30]: '!' (width: 1)
      [31]: '' (width: 0)
      [32]: '[' (width: 1)
      [33]: '0' (width: 1)
      [34]: 'm' (width: 1)
      [35]: ' ' (width: 1)
      [36]: ' ' (width: 1)
      [37]: ' ' (width: 1)
      [38]: ' ' (width: 1)
      [39]: ' ' (width: 1)
      [40]: ' ' (width: 1)
      [41]: ' ' (width: 1)
      [42]: ' ' (width: 1)
      [43]: ' ' (width: 1)
      [44]: ' ' (width: 1)
      [45]: ' ' (width: 1)
      [46]: ' ' (width: 1)
      [47]: ' ' (width: 1)
      [48]: ' ' (width: 1)
      [49]: ' ' (width: 1)
      [50]: ' ' (width: 1)
      [51]: ' ' (width: 1)
      [52]: ' ' (width: 1)
      [53]: ' ' (width: 1)
      [54]: ' ' (width: 1)
      [55]: ' ' (width: 1)
      [56]: ' ' (width: 1)
      [57]: ' ' (width: 1)
      [58]: ' ' (width: 1)
      [59]: ' ' (width: 1)
      [60]: ' ' (width: 1)
      [61]: ' ' (width: 1)
      [62]: ' ' (width: 1)
      [63]: ' ' (width: 1)
      [64]: ' ' (width: 1)
      [65]: ' ' (width: 1)
  Original: 'â”‚ Complete! âœ… â”‚'
  Characters:
    [0] 'â”‚' -> width: 1, scalars: [9474]
    [1] ' ' -> width: 1, scalars: [32]
    [2] 'C' -> width: 1, scalars: [67]
      [66]: ' ' (width: 1)
    [3] 'o' -> width: 1, scalars: [111]
      [67]: ' ' (width: 1)
      [68]: ' ' (width: 1)
      [69]: ' ' (width: 1)
      [70]: ' ' (width: 1)
      [71]: ' ' (width: 1)
      [72]: ' ' (width: 1)
      [73]: ' ' (width: 1)
      [74]: ' ' (width: 1)
    [4] 'm' -> width: 1, scalars: [109]
    [5] 'p' -> width: 1, scalars: [112]
    [6] 'l' -> width: 1, scalars: [108]
    [7] 'e' -> width: 1, scalars: [101]
    [8] 't' -> width: 1, scalars: [116]
    [9] 'e' -> width: 1, scalars: [101]
    [10] '!' -> width: 1, scalars: [33]
    [11] ' ' -> width: 1, scalars: [32]
    [12] 'âœ…' -> width: 2, scalars: [9989]
    [13] ' ' -> width: 1, scalars: [32]
    [14] 'â”‚' -> width: 1, scalars: [9474]
Text component with 12-column constraint:
  Text line 0: 'Complete! âœ…' (length: 11, display width: 12)
      [75]: ' ' (width: 1)
      [76]: ' ' (width: 1)
      [77]: ' ' (width: 1)
      [78]: ' ' (width: 1)
      [79]: ' ' (width: 1)
      [80]: ' ' (width: 1)
      [81]: ' ' (width: 1)
      [82]: ' ' (width: 1)
      [83]: ' ' (width: 1)
      [84]: ' ' (width: 1)
      [85]: ' ' (width: 1)
      [86]: ' ' (width: 1)
      [87]: ' ' (width: 1)
      [88]: ' ' (width: 1)
      [89]: ' ' (width: 1)
      [90]: ' ' (width: 1)
      [91]: ' ' (width: 1)
      [92]: ' ' (width: 1)
      [93]: ' ' (width: 1)
      [94]: ' ' (width: 1)
      [95]: ' ' (width: 1)
      [96]: ' ' (width: 1)
      [97]: ' ' (width: 1)
      [98]: ' ' (width: 1)
      [99]: ' ' (width: 1)
      [100]: ' ' (width: 1)
      [101]: ' ' (width: 1)
      [102]: ' ' (width: 1)
      [103]: ' ' (width: 1)
      [104]: ' ' (width: 1)
      [105]: ' ' (width: 1)
      [106]: ' ' (width: 1)
      [107]: ' ' (width: 1)
      [108]: ' ' (width: 1)
      [109]: 'â”‚' (width: 1)
  Line 3: 'â”‚                                                                                                  â”‚' (length: 100, display width: 100)
  Line 4: 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜' (length: 100, display width: 100)
âœ˜ Test "Console capture maintains log order" skipped: "Interferes with test runner stdout/stderr"
âœ˜ Test "FrameBuffer stops console capture on clear" skipped: "Interferes with test runner stdout/stderr"
âœ˜ Test "Console capture start and stop" skipped: "Interferes with test runner stdout/stderr"
âœ˜ Test "Console capture multiple start calls are safe" skipped: "Interferes with test runner stdout/stderr"
âœ˜ Test "Console capture recent logs" skipped: "Interferes with test runner stdout/stderr"
â—‡ Test "Backpressure policies are documented and configurable" started.
âœ˜ Test "Console capture clear buffer" skipped: "Interferes with test runner stdout/stderr"
â—‡ Test "Atomic writes reduce syscalls vs unbatched writes" started.
âœ˜ Test "FrameBuffer console capture integration" skipped: "Interferes with test runner stdout/stderr"
âœ˜ Test "Console capture buffers log lines" skipped: "Interferes with test runner stdout/stderr"
â—‡ Test "Renderer per-line writes are atomic relative to external logs" started.
âœ˜ Test "Console capture buffer size limit" skipped: "Interferes with test runner stdout/stderr"
âœ˜ Test "FrameBuffer console capture disabled by default" skipped: "Interferes with test runner stdout/stderr"
âœ˜ Test "Console capture handles multiple stdout messages" skipped: "Interferes with test runner stdout/stderr"
â—‡ Test "Console capture initialization" started.
âœ˜ Test "Console capture multiple stop calls are safe" skipped: "Interferes with test runner stdout/stderr"
â—‡ Test "Wraps colored emoji/CJK by display columns and preserves right edge" started.
[?25l[2J[H[0m[1;1H[2KLine 1                        [0m[2;1H[2K                              [0m[3;1H[2KLine 2                        [0m[4;1H[2K                              [0m[5;1H[2KLine 3                        [0m[6;1H[2K                              [0m[7;1H[2K                              [0m[8;1H[2K                              [0m[9;1H[2K                              [0m[10;1H[2K                              [0m[11;1H[?25h[?25l[3;1H[2K[GLine 2 Modified               [0m[11;1H[?25h
=== Constrained Layout Snapshot ===
Container: 120x30
Flexible (grow:1, min:20, max:40): Rect(x: 0, y: 0, width: 40, height: 25)
Fixed (30px, no flex): Rect(x: 40, y: 0, width: 30, height: 25)
Constrained (grow:2, min:15, max:35): Rect(x: 70, y: 0, width: 35, height: 25)

=== Emoji-Safe Layout Snapshot ===
Container: 25x5
Emoji header (8 cols): Rect(x: 0, y: 0, width: 8, height: 3)
Text content (flexGrow: 1): Rect(x: 8, y: 0, width: 15, height: 3)
Status icon (2 cols): Rect(x: 23, y: 0, width: 2, height: 3)

=== Dashboard Layout Snapshot ===
Container: 100x40
Sidebar (flexShrink: 0, minWidth: 15): Rect(x: 0, y: 0, width: 20, height: 30)
Main (flexGrow: 1): Rect(x: 20, y: 0, width: 55, height: 30)
Right Panel (flexShrink: 2, minWidth: 10): Rect(x: 75, y: 0, width: 25, height: 30)

=== Responsive Card Grid Snapshot ===
Container: 80x60, Card size: 30x20
Expected: 2 cards per row (30+30=60 < 80), 2 rows
Card 1: Rect(x: 0, y: 0, width: 30, height: 20)
Card 2: Rect(x: 30, y: 0, width: 30, height: 20)
Card 3: Rect(x: 0, y: 20, width: 30, height: 20)
Card 4: Rect(x: 30, y: 20, width: 30, height: 20)
âœ” Test "Truncate appends reset and prevents style bleed" passed after 0.012 seconds.
[?25l[2J[H[0m[1;1H[2K                                        [0m[2;1H[2K                                        [0m[3;1H[2K                                        [0m[4;1H[2K                                        [0m[5;1H[2K      Frame Buffer Test                 [0m[6;1H[2K      Second Line                       [0m[7;1H[2K                                        [0m[8;1H[2K                                        [0m[9;1H[2K                                        [0m[10;1H[2K                                        [0m[11;1H[2K                                        [0m[12;1H[2K                                        [0m[13;1H[2K                                        [0m[14;1H[2K                                        [0m[15;1H[2K                                        [0m[16;1H[?25h[?25l[?25l[?25lâœ” Test "exit(error:) uses default code 1 for plain errors" passed after 0.276 seconds.
âœ” Test "useApp().exit() triggers unmount and resolves waitUntilExit" passed after 0.276 seconds.
âœ” Test "Ctrl-C triggers unmount when exitOnCtrlC=true via InputManager path" passed after 0.276 seconds.
[?25l[?25l[?25lâœ” Test "exit(error:) uses provided custom exit code when error conforms" passed after 0.277 seconds.
âœ” Suite "RuneCLI exit helper" passed after 0.281 seconds.
âœ” Suite InputManagerTests passed after 0.281 seconds.
[?25lâœ” Suite "RUNE-39+: App exit code propagation via useApp().exit(error:)" passed after 0.281 seconds.
[?25l[?25lâœ” Test "useApp().clear() stops console capture but keeps handle active" passed after 0.277 seconds.
âœ” Suite "RUNE-39: useApp() context" passed after 0.282 seconds.
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2KCount: 0                                                                        [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                             [23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K                                                                                [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h                                   [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K                                                                                [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2KTop                                                                             [0m[2;1H[2K                                                                                [0m[3;1H[2KBottom                                                                          [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25hâœ” Test "Default environment streams are exposed with metadata" passed after 0.280 seconds.
âœ” Test "Box works with render() function and RenderHandle" passed after 0.279 seconds.
âœ” Test "Hooks surface configured custom streams" passed after 0.280 seconds.
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25hâœ” Suite "RUNE-27 integration tests" passed after 0.284 seconds.
âœ” Test "No-focusables broadcast remains unaffected by manager" passed after 0.279 seconds.
âœ” Suite "RUNE-40: useStdin/Stdout/Stderr hooks" passed after 0.284 seconds.
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kv                                                                               [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h[?25l[?25l[?25l[25;1H[?25h[?25l[25;1H[?25h[25;1H[?25h[?25l[25;1H[?25h[25;1H[?25h[?25l[25;1H[?25hâœ” Test "useRef identity persists across rerenders and does not trigger rerender on mutation" passed after 0.281 seconds.
[?25lâœ” Test "Signed zeroes: 0.0 and -0.0 are distinct and trigger reruns" passed after 0.279 seconds.
[25;1H[?25h[?25l[25;1H[?25h[?25l[?25l[?25l[25;1H[?25h[25;1H[?25h[?25l[25;1H[?25hâœ” Test "useMemo recomputes only when deps change" passed after 0.281 seconds.
âœ” Test "Identity wrapper opts into object-identity dep semantics" passed after 0.279 seconds.
[?25l[25;1H[?25h[?25l[25;1H[?25hâœ” Test "Custom Hashable with changing description triggers deps change" passed after 0.280 seconds.
[?25l[25;1H[?25hAll lines changing benchmark:
[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2KCount: 0                                                                        [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25h  Line-diff: 9801 bytes, 264.39ms
  Full redraw: 10445 bytes, 6.17ms
  Efficiency: 0.0%
âœ” Test "Frame rate limiting allows frames when under limit" passed after 0.279 seconds.
âœ” Suite LineDiffPerformanceTests passed after 0.285 seconds.
âœ” Test "State preserves across rerenders with stable identity" passed after 0.281 seconds.
âœ” Test "Block policy flushes immediately and clears buffer for oversized data" passed after 0.281 seconds.
[?25lâœ” Suite ViewStatePreservationTests passed after 0.286 seconds.
âœ” Suite "Output writer blocking behavior" passed after 0.286 seconds.
âœ” Test "Benchmark: All lines changing favors full redraw" passed after 0.281 seconds.
[25;1H[?25hâœ” Test "Double.nan encodes to a stable deps token across commits" passed after 0.280 seconds.
âœ” Suite "Hooks deps equality edge cases" passed after 0.286 seconds.
[?25l[25;1H[?25hâœ” Test "Concurrent clear/rerender/unmount is safe" passed after 0.282 seconds.
âœ” Suite RenderHandleConcurrencyStressTests passed after 0.287 seconds.
[?25l[25;1H[?25hâœ” Test "useEffect deps sugar: nil runs every commit, [] mount-only, values trigger rerun" passed after 0.283 seconds.
âœ” Suite "Hooks additional tests: deps sugar, useRef, useMemo" passed after 0.287 seconds.
[?25l[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2Kâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”[0m[2;1H[2Kâ”‚[37m[1mAlt Screen Demo[39m[0m                                                               â”‚[0m[3;1H[2Kâ”‚                                                                              â”‚[0m[4;1H[2Kâ”‚                                                                              â”‚[0m[5;1H[2Kâ”‚                                                                              â”‚[0m[6;1H[2Kâ”‚                                                                              â”‚[0m[7;1H[2Kâ”‚                                                                              â”‚[0m[8;1H[2Kâ”‚                                                                              â”‚[0m[9;1H[2Kâ”‚                                                                              â”‚[0m[10;1H[2Kâ”‚                                                                              â”‚[0m[11;1H[2Kâ”‚                                                                              â”‚[0m[12;1H[2Kâ”‚                                                                              â”‚[0m[13;1H[2Kâ”‚                                                                              â”‚[0m[14;1H[2Kâ”‚                                                                              â”‚[0m[15;1H[2Kâ”‚                                                                              â”‚[0m[16;1H[2Kâ”‚                                                                              â”‚[0m[17;1H[2Kâ”‚                                                                              â”‚[0m[18;1H[2Kâ”‚                                                                              â”‚[0m[19;1H[2Kâ”‚                                                                              â”‚[0m[20;1H[2Kâ”‚                                                                              â”‚[0m[21;1H[2Kâ”‚                                                                              â”‚[0m[22;1H[2Kâ”‚                                                                              â”‚[0m[23;1H[2Kâ”‚                                                                              â”‚[0m[24;1H[2Kâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜[0m[25;1H[?25hâœ” Test "Debounced resize burst triggers a single rerender" passed after 0.289 seconds.
Single line changes benchmark:
  Line-diff: 2966 bytes, 267.74ms
  Full redraw: 21100 bytes, 12.62ms
  Bytes saved: 18134
  Efficiency: 85.5%
âœ” Test "Benchmark: Single line changes favor line-diff" passed after 0.291 seconds.
No changes benchmark:
  Line-diff: 2092 bytes, 267.38ms
  Full redraw: 21100 bytes, 12.38ms
  Bytes saved: 19008
  Efficiency: 90.0%
âœ” Test "Benchmark: No changes favor line-diff" passed after 0.291 seconds.
âœ” Test "In-place repaint without flicker" passed after 0.292 seconds.
âœ” Test "Frame buffer handles frame height shrinkage" passed after 0.292 seconds.
âœ” Test "Frame height shrinkage cleanup" passed after 0.292 seconds.
âœ” Suite AlternateScreenBufferTests passed after 0.298 seconds.
âœ” Test "Resize during render does not crash and yields a single repaint per burst" passed after 0.294 seconds.
Automatic mode benchmark:
  Automatic: 13040 bytes, 270.29ms
  Full redraw: 21100 bytes, 13.95ms
  Bytes saved: 8060
  Efficiency: 38.0%
âœ” Test "Benchmark: Automatic mode makes good decisions" passed after 0.295 seconds.
âœ” Suite "Line diff benchmark tests" passed after 0.299 seconds.
âœ” Test "Composite view body is converted to Box/Text and renders border glyphs" passed after 0.296 seconds.
âœ” Suite "Composite View resolution renders child components (no placeholders)" passed after 0.301 seconds.
[?25l[23A[2K[2;1H[2K[3;1H[2K[4;1H[2K[5;1H[2K[6;1H[2K[7;1H[2K[8;1H[2K[9;1H[2K[10;1H[2K[11;1H[2K[12;1H[2K[13;1H[2K[14;1H[2K[15;1H[2K[16;1H[2K[17;1H[2K[18;1H[2K[19;1H[2K[20;1H[2K[21;1H[2K[22;1H[2K[23;1H[2K[24;1H[2K[1;1H[0m[1;1H[2K                                                                                [0m[2;1H[2K                                                                                [0m[3;1H[2K                                                                                [0m[4;1H[2K                                                                                [0m[5;1H[2K                                                                                [0m[6;1H[2K                                                                                [0m[7;1H[2K                                                                                [0m[8;1H[2K                                                                                [0m[9;1H[2K                                                                                [0m[10;1H[2K                                                                                [0m[11;1H[2K                                                                                [0m[12;1H[2K                                                                                [0m[13;1H[2K                                                                                [0m[14;1H[2K                                                                                [0m[15;1H[2K                                                                                [0m[16;1H[2K                                                                                [0m[17;1H[2K                                                                                [0m[18;1H[2K                                                                                [0m[19;1H[2K                                                                                [0m[20;1H[2K                                                                                [0m[21;1H[2K                                                                                [0m[22;1H[2K                                                                                [0m[23;1H[2K                                                                                [0m[24;1H[2K                                                                                [0m[25;1H[?25hâœ” Test "Meta: ESC-prefixed ASCII letter is delivered" passed after 0.311 seconds.
âœ” Test "When no focusables are registered, useInput remains broadcast to all active handlers (back-compat)" passed after 0.311 seconds.
âœ” Test "Two distinct bursts cause two rerenders" passed after 0.312 seconds.
âœ” Suite "Resize handling tests" passed after 0.316 seconds.
âœ” Test "Multiple frame renders maintain state" passed after 0.315 seconds.
âœ” Suite "Frame buffer integration tests" passed after 0.320 seconds.
âœ” Test "Unsubscribe on unmount; no leaks" passed after 0.321 seconds.
[?25l[1S[24;1H                                                                                [25;1H[?25hâœ” Test "Hook receives arrow/function/ctrl/meta keys" passed after 0.330 seconds.
âœ” Test "F1-F4 (SS3), F6-F12 (CSI), Home/End/Page with modifiers, Shift+Ctrl" passed after 0.330 seconds.
âœ” Suite "RUNE-38: useInput matrix" passed after 0.334 seconds.
âœ” Test "isActive gates handler" passed after 0.346 seconds.
âœ” Test "Direct focus by id/path works" passed after 0.345 seconds.
âœ” Test "Tab advances focus via useFocusManager hook" passed after 0.344 seconds.
âœ” Test "Global input handlers receive events regardless of focus; others are gated" passed after 0.346 seconds.
âœ” Suite "RUNE-38: useInput hook" passed after 0.350 seconds.
âœ” Suite "RUNE-41: useFocusManager hook integration" passed after 0.350 seconds.
âœ” Test "Tab cycles focus among focusable elements and gates input to focused one" passed after 0.378 seconds.
âœ” Suite "RUNE-41: Focus registry + useFocus/useFocusManager" passed after 0.382 seconds.
âœ” Test "Programmatic next/previous cycles focus and gates input" passed after 0.435 seconds.
âœ” Suite "RUNE-41: useFocusManager hook" passed after 0.440 seconds.
âœ˜ Test run with 609 tests failed after 0.441 seconds with 1 issue.
